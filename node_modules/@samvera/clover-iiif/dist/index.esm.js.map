{
  "version": 3,
  "sources": ["../src/index.tsx", "../src/context/viewer-context.tsx", "../src/components/Viewer/Viewer.tsx", "../src/hooks/use-iiif/getAccompanyingCanvasImage.ts", "../src/hooks/use-iiif/getCanvasByCriteria.ts", "../src/hooks/use-iiif/getLabel.ts", "../src/hooks/use-iiif/getPaintingResource.ts", "../src/hooks/use-iiif/getSupplementingResources.ts", "../src/hooks/use-iiif/getThumbnail.ts", "../src/stitches.tsx", "../src/components/Viewer/Viewer.styled.tsx", "../src/hooks/useMediaQuery.ts", "../src/hooks/useBodyLocked.ts", "../src/components/Viewer/Header.tsx", "../src/components/Viewer/Header.styled.ts", "../src/components/Collection/Collection.styled.ts", "../src/components/Viewer/IIIFBadge.tsx", "../src/components/CopyText.tsx", "../src/hooks/useCopyToClipboard.ts", "../src/components/Collection/Collection.tsx", "../src/components/Collection/Icon.tsx", "../src/components/Viewer/Toggle.tsx", "../src/components/Viewer/Toggle.styled.ts", "../src/components/Viewer/Content.tsx", "../src/components/Media/Media.tsx", "../src/components/Media/Media.styled.tsx", "../src/components/Media/Thumbnail.tsx", "../src/services/utils.ts", "../src/components/Media/Thumbnail.styled.tsx", "../src/hooks/use-iiif/getResourceType.ts", "../src/components/Media/Controls.tsx", "../src/components/Media/Controls.styled.tsx", "../src/hooks/useKeyPress.ts", "../src/components/Navigator/Navigator.tsx", "../src/components/Navigator/Navigator.styled.tsx", "../src/components/Navigator/Resource.tsx", "../src/components/Navigator/Cue.styled.tsx", "../src/hooks/use-webvtt.ts", "../src/components/Navigator/Menu.tsx", "../src/components/Navigator/Cue.tsx", "../src/context/current-time-context.tsx", "../src/components/Navigator/Menu.styled.tsx", "../src/components/Navigator/About/About.styled.ts", "../src/components/Properties/Homepage.tsx", "../src/components/Properties/Id.tsx", "../src/components/Properties/Metadata.tsx", "../src/components/Properties/RequiredStatement.tsx", "../src/components/Properties/Rights.tsx", "../src/components/Properties/SeeAlso.tsx", "../src/components/Properties/Summary.tsx", "../src/components/Properties/Thumbnail.tsx", "../src/components/Navigator/About/About.tsx", "../src/components/Player/Player.tsx", "../src/components/Player/Player.styled.tsx", "../src/components/Player/AudioVisualizer.tsx", "../src/components/Player/AudioVisualizer.styled.tsx", "../src/components/Player/Track.tsx", "../src/components/ImageViewer/ImageViewer.tsx", "../src/components/ImageViewer/OSD.tsx", "../src/components/ImageViewer/ImageViewer.styled.tsx", "../src/components/ImageViewer/Controls.tsx", "../src/components/ImageViewer/Button.tsx", "../src/components/ImageViewer/Button.styled.tsx", "../src/components/ImageViewer/Controls.styled.tsx", "../src/services/iiif.ts", "../src/components/Viewer/ErrorFallback.tsx", "../src/components/Viewer/ErrorFallback.styled.tsx"],
  "sourcesContent": ["import React, { useEffect, useState } from \"react\";\nimport { CollectionNormalized, ManifestNormalized } from \"@iiif/presentation-3\";\nimport {\n  ConfigOptions,\n  ViewerProvider,\n  useViewerState,\n  useViewerDispatch,\n} from \"@/context/viewer-context\";\nimport Viewer from \"@/components/Viewer/Viewer\";\nimport { createTheme } from \"@stitches/react\";\n\ninterface Props {\n  canvasIdCallback?: (arg0: string) => void;\n  customTheme?: any;\n  id: string;\n  manifestId?: string;\n  options?: ConfigOptions;\n}\n\nconst App: React.FC<Props> = ({\n  canvasIdCallback = () => {},\n  customTheme,\n  id,\n  manifestId,\n  options,\n}) => {\n  return (\n    <ViewerProvider>\n      <RenderViewer\n        id={id}\n        manifestId={manifestId}\n        canvasIdCallback={canvasIdCallback}\n        customTheme={customTheme}\n        options={options}\n      />\n    </ViewerProvider>\n  );\n};\n\nconst RenderViewer: React.FC<Props> = ({\n  canvasIdCallback,\n  customTheme,\n  id,\n  manifestId,\n  options,\n}) => {\n  const dispatch: any = useViewerDispatch();\n\n  /**\n   * Retrieve state set by the wrapping <ViewerProvider/> and make\n   * the normalized manifest available from @iiif/vault.\n   */\n  const store = useViewerState();\n  const { activeCanvas, activeManifest, isLoaded, vault } = store;\n  const [iiifResource, setIiifResource] = useState<\n    CollectionNormalized | ManifestNormalized\n  >();\n  const [manifest, setManifest] = useState<ManifestNormalized>();\n\n  /**\n   * Overrides the baseline stitches theme when set.\n   */\n  let theme = {};\n  if (customTheme) theme = createTheme(\"custom\", customTheme);\n\n  /**\n   * On change, pass the activeCanvas up to the wrapping `<App/>`\n   * component to be handed off to a consuming application.\n   */\n  useEffect(() => {\n    if (canvasIdCallback) canvasIdCallback(activeCanvas);\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    if (activeManifest)\n      vault\n        .loadManifest(activeManifest)\n        .then((data: any) => {\n          setManifest(data);\n          dispatch({\n            type: \"updateActiveCanvas\",\n            canvasId: data.items[0] && data.items[0].id,\n          });\n        })\n        .catch((error: any) => {\n          console.error(`Manifest failed to load: ${error}`);\n        })\n        .finally(() => {\n          dispatch({\n            type: \"updateIsLoaded\",\n            isLoaded: true,\n          });\n        });\n  }, [activeManifest]);\n\n  useEffect(() => {\n    let resource = id;\n\n    /**\n     * set resource as manifestIf if it exists\n     */\n    if (manifestId) resource = manifestId;\n\n    dispatch({\n      type: \"updateConfigOptions\",\n      configOptions: options,\n    });\n\n    vault\n      .load(resource)\n      .then((data: any) => {\n        setIiifResource(data);\n      })\n      .catch((error: any) => {\n        console.error(`The IIIF resource ${resource} failed to load: ${error}`);\n      });\n  }, [id, options]);\n\n  useEffect(() => {\n    let manifests: string[] = [];\n\n    if (iiifResource?.type === \"Collection\") {\n      dispatch({\n        type: \"updateCollection\",\n        collection: iiifResource,\n      });\n\n      manifests = iiifResource.items\n        .filter((item) => item.type === \"Manifest\")\n        .map((manifest) => manifest.id);\n\n      if (manifests.length > 0) {\n        dispatch({\n          type: \"updateActiveManifest\",\n          manifestId: manifests[0],\n        });\n      }\n    } else if (iiifResource?.type === \"Manifest\") {\n      dispatch({\n        type: \"updateActiveManifest\",\n        manifestId: iiifResource.id,\n      });\n    }\n  }, [iiifResource]);\n\n  /**\n   * Render loading component while manifest is fetched and\n   * loaded into React.Context as `vault`. Upon completion\n   * (error or not) isLoaded will be set to true.\n   */\n  if (!isLoaded) return <>Loading</>;\n\n  /**\n   * If an error occurs during manifest fetch process used by\n   * @iiif/vault, vault will not return a manifest\n   * that is fully normalized, and be missing the items property.\n   * This being undefined signals that something went wrong and we\n   * will render a user-friendly error as a functional component.\n   */\n\n  if (!manifest || !manifest[\"items\"]) {\n    console.log(`The IIIF manifest ${manifestId} failed to load.`);\n    return <></>;\n  }\n\n  /**\n   * If the manifest returned by @iiif/vault does not\n   * contain any canvases, then we'll show an error to the screen. This\n   * may be required if the viewer is rendered to preview manifests in\n   * repository administration views.\n   */\n  if (manifest[\"items\"].length === 0) {\n    console.log(`The IIIF manifest ${manifestId} does not contain canvases.`);\n    return <></>;\n  }\n\n  /**\n   * If manifest is normalized by @iiif/vault, we know\n   * that the manifest data is retrievable via vault.get() and we\n   * will will set the activeCanvas to the first index and render the\n   * <Viewer/> component.\n   */\n  return <Viewer manifest={manifest} theme={theme} key={manifest.id} />;\n};\n\nexport default App;\n", "import { Options } from \"openseadragon\";\nimport React, { useReducer } from \"react\";\nimport { Vault } from \"@iiif/vault\";\nimport { CollectionNormalized } from \"@iiif/presentation-3\";\n\nexport type ConfigOptions = {\n  canvasBackgroundColor?: string;\n  canvasHeight?: string;\n  ignoreCaptionLabels?: string[];\n  openSeadragon?: Options;\n  renderAbout?: boolean;\n  showIIIFBadge?: boolean;\n  showInformationToggle?: boolean;\n  showTitle?: boolean;\n};\n\nconst defaultConfigOptions = {\n  canvasBackgroundColor: \"#e6e8eb\",\n  canvasHeight: \"61.8vh\",\n  ignoreCaptionLabels: [],\n  renderAbout: true,\n  showIIIFBadge: true,\n  showInformationToggle: true,\n  showTitle: true,\n};\n\ninterface ViewerContextStore {\n  activeCanvas: string;\n  activeManifest: string;\n  collection?: CollectionNormalized | {};\n  configOptions: ConfigOptions;\n  informationExpanded: boolean;\n  isLoaded: boolean;\n  vault: Vault;\n}\n\ninterface ViewerAction {\n  type: string;\n  canvasId: string;\n  collection: CollectionNormalized;\n  configOptions: ConfigOptions;\n  informationExpanded: boolean;\n  isLoaded: boolean;\n  manifestId: string;\n}\n\nconst defaultState: ViewerContextStore = {\n  activeCanvas: \"\",\n  activeManifest: \"\",\n  collection: {},\n  configOptions: defaultConfigOptions,\n  informationExpanded: true,\n  isLoaded: false,\n  vault: new Vault(),\n};\n\nconst ViewerStateContext =\n  React.createContext<ViewerContextStore>(defaultState);\nconst ViewerDispatchContext =\n  React.createContext<ViewerContextStore>(defaultState);\n\nfunction viewerReducer(state: ViewerContextStore, action: ViewerAction) {\n  switch (action.type) {\n    case \"updateActiveCanvas\": {\n      /**\n       * Set canvasId to empty string if it comes back undefined.\n       */\n      if (!action.canvasId) action.canvasId = \"\";\n      return {\n        ...state,\n        activeCanvas: action.canvasId,\n      };\n    }\n    case \"updateActiveManifest\": {\n      return {\n        ...state,\n        activeManifest: action.manifestId,\n      };\n    }\n    case \"updateCollection\": {\n      return {\n        ...state,\n        collection: action.collection,\n      };\n    }\n    case \"updateConfigOptions\": {\n      return {\n        ...state,\n        configOptions: {\n          ...defaultConfigOptions,\n          ...action.configOptions,\n        },\n      };\n    }\n    case \"updateInformationExpanded\": {\n      return {\n        ...state,\n        informationExpanded: action.informationExpanded,\n      };\n    }\n    case \"updateIsLoaded\": {\n      return {\n        ...state,\n        isLoaded: action.isLoaded,\n      };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\ninterface ViewerProviderProps {\n  initialState?: ViewerContextStore;\n  children: React.ReactNode;\n}\n\nconst ViewerProvider: React.FC<ViewerProviderProps> = ({\n  initialState = defaultState,\n  children,\n}) => {\n  const [state, dispatch] = useReducer<\n    React.Reducer<ViewerContextStore, ViewerAction>\n  >(viewerReducer, initialState);\n\n  return (\n    <ViewerStateContext.Provider value={state}>\n      <ViewerDispatchContext.Provider\n        value={dispatch as unknown as ViewerContextStore}\n      >\n        {children}\n      </ViewerDispatchContext.Provider>\n    </ViewerStateContext.Provider>\n  );\n};\n\nfunction useViewerState() {\n  const context = React.useContext(ViewerStateContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerState must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nfunction useViewerDispatch() {\n  const context = React.useContext(ViewerDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useViewerDispatch must be used within a ViewerProvider\");\n  }\n  return context;\n}\n\nexport { ViewerProvider, useViewerState, useViewerDispatch };\n", "import React, { useEffect, useState } from \"react\";\nimport {\n  ExternalResourceTypes,\n  InternationalString,\n  ManifestNormalized,\n} from \"@iiif/presentation-3\";\nimport {\n  getPaintingResource,\n  getSupplementingResources,\n} from \"@/hooks/use-iiif\";\nimport { useViewerState } from \"@/context/viewer-context\";\nimport { Wrapper } from \"@/components/Viewer/Viewer.styled\";\nimport { useMediaQuery } from \"@/hooks/useMediaQuery\";\nimport { useBodyLocked } from \"@/hooks/useBodyLocked\";\nimport { media } from \"@/stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\nimport ViewerHeader from \"@/components/Viewer/Header\";\nimport ViewerContent from \"@/components/Viewer/Content\";\nimport { LabeledResource } from \"@/hooks/use-iiif/getSupplementingResources\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport ErrorFallback from \"@/components/Viewer/ErrorFallback\";\nimport { ErrorBoundary } from \"react-error-boundary\";\n\ninterface ViewerProps {\n  manifest: ManifestNormalized;\n  theme?: any;\n}\n\nconst Viewer: React.FC<ViewerProps> = ({ manifest, theme }) => {\n  /**\n   * Viewer State\n   */\n  const viewerState: any = useViewerState();\n  const { activeCanvas, informationExpanded, vault, configOptions } =\n    viewerState;\n\n  /**\n   * Local state\n   */\n  const [isMedia, setIsMedia] = useState(false);\n  const [isNavigator, setIsNavigator] = useState<boolean>(false);\n  const [isNavigatorOpen, setIsNavigatorOpen] = useState<boolean>(true);\n  const [painting, setPainting] = useState<IIIFExternalWebResource | undefined>(\n    undefined,\n  );\n  const [resources, setResources] = useState<LabeledResource[]>([]);\n\n  /**\n   * Hooks\n   */\n  const [isBodyLocked, setIsBodyLocked] = useBodyLocked(false);\n  const isSmallViewport = useMediaQuery(media.sm);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsNavigatorOpen(true);\n      return;\n    }\n    setIsNavigatorOpen(false);\n  }, [isSmallViewport]);\n\n  useEffect(() => {\n    if (!isSmallViewport) {\n      setIsBodyLocked(false);\n      return;\n    }\n    setIsBodyLocked(isNavigatorOpen);\n  }, [isNavigatorOpen]);\n\n  useEffect(() => {\n    const painting = getPaintingResource(vault, activeCanvas);\n    const resources = getSupplementingResources(\n      vault,\n      activeCanvas,\n      \"text/vtt\",\n    );\n    if (painting) {\n      setIsMedia(\n        [\"Sound\", \"Video\"].indexOf(painting.type as ExternalResourceTypes) > -1\n          ? true\n          : false,\n      );\n      setPainting({ ...painting });\n    }\n    setResources(resources);\n    setIsNavigator(resources.length !== 0);\n  }, [activeCanvas]);\n\n  return (\n    <ErrorBoundary FallbackComponent={ErrorFallback}>\n      <Wrapper\n        className={`${theme} clover-iiif`}\n        data-body-locked={isBodyLocked}\n        data-navigator={isNavigator}\n        data-navigator-open={isNavigatorOpen}\n      >\n        <Collapsible.Root\n          open={isNavigatorOpen}\n          onOpenChange={setIsNavigatorOpen}\n        >\n          <ViewerHeader\n            manifestLabel={manifest.label as InternationalString}\n            manifestId={manifest.id}\n          />\n          <ViewerContent\n            activeCanvas={activeCanvas}\n            painting={painting as IIIFExternalWebResource}\n            resources={resources}\n            items={manifest.items}\n            isAbout={configOptions.renderAbout}\n            isMedia={isMedia}\n            isInformation={informationExpanded}\n            isNavigator={isNavigator}\n            isNavigatorOpen={isNavigatorOpen}\n          />\n        </Collapsible.Root>\n      </Wrapper>\n    </ErrorBoundary>\n  );\n};\n\nexport default Viewer;\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\n\n// TODO: Fix this type when fixing tests\nfunction getUrl(obj: any) {\n  // No IIIF image service, just return vague id value\n  if (!obj.service) {\n    return obj.id;\n  }\n  // Construct a IIIF Image service url path with params\n  return `${obj.service[0].id}/full/,${obj.height || 500}/0/default.jpg`;\n}\n\n// TODO: Fix this type when fixing all tests\nexport const getAccompanyingCanvasImage = (\n  accompanyingCanvas: any | undefined,\n): string | undefined => {\n  if (!accompanyingCanvas) return;\n  try {\n    /**\n     * Step 1: does a thumbnail item exist on canvas root?\n     */\n    const thumbnail: Array<IIIFExternalWebResource> | undefined =\n      accompanyingCanvas.thumbnail;\n    if (thumbnail && thumbnail.length > 0) {\n      return getUrl(thumbnail[0]);\n    }\n\n    /**\n     * Step 2: Dig into the Annotation Page > Body\n     */\n\n    return getUrl(accompanyingCanvas.items[0].items[0].body);\n  } catch (e) {\n    console.error(\"Error retrieving accompanying canvas image\", e);\n    return;\n  }\n};\n", "import {\n  Annotation,\n  AnnotationPageNormalized,\n  Canvas,\n  CanvasNormalized,\n  ContentResource,\n  ExternalResourceTypes,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\n\nexport interface CanvasEntity {\n  canvas: CanvasNormalized | undefined;\n  accompanyingCanvas: Canvas | undefined;\n  annotationPage: AnnotationPageNormalized | undefined;\n  annotations: Array<Annotation | undefined>;\n}\n\nexport const getCanvasByCriteria = (\n  vault: any,\n  item: Canvas,\n  motivation: string,\n  paintingType: Array<ExternalResourceTypes>,\n): CanvasEntity => {\n  const entity: CanvasEntity = {\n    canvas: undefined,\n    accompanyingCanvas: undefined,\n    annotationPage: undefined,\n    annotations: [],\n  };\n\n  const filterAnnotations = (annotation: Annotation) => {\n    if (annotation) {\n      // Handle invalid annotations\n      if (!annotation.body || !annotation.motivation) {\n        console.error(\n          `Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'`,\n          annotation,\n        );\n        return;\n      }\n\n      if (!annotation.body) return;\n\n      let annotationBody = annotation.body as\n        | ContentResource\n        | ContentResource[];\n\n      if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n      const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n      if (!resource) return;\n      switch (motivation) {\n        case \"painting\":\n          if (\n            annotation.target === item.id &&\n            annotation.motivation &&\n            annotation.motivation[0] === \"painting\" &&\n            paintingType.includes(resource.type)\n          )\n            annotation.body = resource;\n          return annotation;\n        case \"supplementing\":\n          return;\n        default: {\n          throw new Error(`Invalid annotation motivation.`);\n        }\n      }\n    }\n  };\n\n  entity.canvas = vault.get(item);\n\n  if (entity.canvas) {\n    entity.annotationPage = vault.get(entity.canvas.items[0]);\n    entity.accompanyingCanvas = entity.canvas?.accompanyingCanvas\n      ? vault.get(entity.canvas?.accompanyingCanvas)\n      : undefined;\n  }\n\n  if (entity.annotationPage)\n    entity.annotations = vault\n      .get(entity.annotationPage.items)\n      .filter(filterAnnotations);\n\n  return entity;\n};\n", "import { InternationalString } from \"@iiif/presentation-3\";\n\n// Get string from a IIIF pres 3 label by language code\nexport const getLabel = (\n  label: InternationalString,\n  language: string = \"en\",\n) => {\n  /*\n   * If no label exists, return an empty string.\n   */\n  if (!label) return \"\";\n\n  /*\n   * If InternationalString code does not exist on label, then\n   * return what may be there, ex: label.none[0] OR label.fr[0]\n   */\n  if (!label[language]) {\n    const codes: Array<string> = Object.getOwnPropertyNames(label);\n    if (codes.length > 0) return label[codes[0]];\n  }\n\n  /*\n   * Return label value for InternationalString code `en`\n   */\n  return label[language];\n};\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { getCanvasByCriteria } from \"@/hooks/use-iiif\";\n\nexport const getPaintingResource = (\n  vault: any,\n  id: string,\n): IIIFExternalWebResource | undefined => {\n  const canvasEntity = getCanvasByCriteria(\n    vault,\n    { id, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\", \"Sound\", \"Video\"],\n  );\n\n  if (canvasEntity.annotations.length === 0) return;\n\n  if (canvasEntity.annotations[0] && canvasEntity.annotations[0].body)\n    return canvasEntity.annotations[0].body as IIIFExternalWebResource;\n\n  return;\n};\n", "import {\n  Annotation,\n  AnnotationPage,\n  CanvasNormalized,\n  ContentResource,\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\n\nexport interface LabeledResource {\n  id?: string;\n  type: \"Dataset\" | \"Image\" | \"Video\" | \"Sound\" | \"Text\";\n  format?: string;\n  label: InternationalString;\n  language?: string | string[];\n  processingLanguage?: string;\n  textDirection?: \"ltr\" | \"rtl\" | \"auto\";\n}\n\n// Get webVtt annotations from activeCanvas\nexport const getSupplementingResources = (\n  vault: any,\n  activeCanvas: string,\n  format: string,\n): Array<LabeledResource> => {\n  const canvas: CanvasNormalized = vault.get({\n    id: activeCanvas,\n    type: \"Canvas\",\n  });\n\n  if (!canvas?.annotations || !canvas.annotations[0]) return [];\n\n  const annotationPage: AnnotationPage = vault.get(canvas.annotations[0]);\n\n  const annotations: Annotation[] = vault.get(annotationPage.items);\n  if (!Array.isArray(annotations)) return [];\n\n  return annotations\n    .filter((annotation) => {\n      if (!annotation.body) return;\n      if (annotation.motivation?.includes(\"supplementing\")) {\n        let annotationBody = annotation.body as\n          | ContentResource\n          | ContentResource[];\n\n        if (Array.isArray(annotationBody)) annotationBody = annotationBody[0];\n\n        const resource: IIIFExternalWebResource = vault.get(annotationBody.id);\n        if (resource.format === format) {\n          annotation.body = resource;\n          return annotation;\n        }\n      }\n    })\n    .map((filtered: Annotation) => {\n      return filtered.body as LabeledResource;\n    });\n};\n", "import { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { CanvasEntity } from \"@/hooks/use-iiif/getCanvasByCriteria\";\n\nexport const getThumbnail = (\n  vault: any,\n  entity: CanvasEntity,\n  width: number,\n  height: number,\n) => {\n  /*\n   * 1. Initiate empty candidates array.\n   */\n  let candidates: Array<IIIFExternalWebResource> = [];\n\n  /*\n   * 2. Check if canvas has an explicitly assigned IIIF thumbnail.\n   */\n  if (entity.canvas)\n    if (entity.canvas.thumbnail.length > 0) {\n      const canvasThumbnail: IIIFExternalWebResource = vault.get(\n        entity.canvas.thumbnail[0],\n      );\n      candidates.push(canvasThumbnail);\n    }\n\n  if (entity.annotations[0]) {\n    /*\n     * 2. Check if painting annotation has an explicitly assigned IIIF thumbnail.\n     */\n    if (entity.annotations[0].thumbnail)\n      if (entity.annotations[0].thumbnail.length > 0) {\n        const annotationThumbnail: IIIFExternalWebResource = vault.get(\n          entity.annotations[0].thumbnail[0],\n        );\n        candidates.push(annotationThumbnail);\n      }\n\n    /*\n     * 3. Check if painting annotation is of type Image.\n     */\n    if (!entity.annotations[0].body) return;\n    const annotationBody = entity.annotations[0]\n      .body as IIIFExternalWebResource;\n\n    if (annotationBody.type === \"Image\") candidates.push(annotationBody);\n  }\n\n  /*\n   * 4. Validate candidates and make selection.\n   */\n  if (candidates.length === 0) return;\n\n  const selectedCandidate: IIIFExternalWebResource = {\n    id: candidates[0].id,\n    format: candidates[0].format,\n    type: candidates[0].type,\n    width: width,\n    height: height,\n  };\n\n  /*\n   * 5. Return (for time being crudely) constructed image object.\n   */\n  const thumbnailContent = selectedCandidate;\n  //console.log(\"thumbnailContent\", thumbnailContent);\n\n  return thumbnailContent;\n};\n", "import { createStitches } from \"@stitches/react\";\n\nexport const theme = {\n  colors: {\n    /*\n     * Black and dark grays in a light theme.\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    primary: \"#1a1d1e\",\n    primaryMuted: \"#26292b\",\n    primaryAlt: \"#151718\",\n\n    /*\n     * Key brand color(s).\n     * Must contrast to 4.5 or greater with `secondary`.\n     */\n    accent: \"#006adc\",\n    accentMuted: \"#5eb0ef\",\n    accentAlt: \"#00254d\",\n\n    /*\n     * White and light grays in a light theme.\n     * Must contrast to 4.5 or greater with `primary` and  `accent`.\n     */\n    secondary: \"#FFFFFF\",\n    secondaryMuted: \"#e6e8eb\",\n    secondaryAlt: \"#c1c8cd\",\n  },\n  fonts: {\n    sans: \"'Inter', Arial, sans-serif\",\n    display: \"'Calistoga', 'Inter', Arial, sans-serif\",\n  },\n  transitions: {\n    all: \"all 500ms cubic-bezier(0.16, 1, 0.3, 1)\",\n  },\n};\n\nexport const media = {\n  xxs: \"(max-width: 349px)\",\n  xs: \"(max-width: 575px)\",\n  sm: \"(max-width: 767px)\",\n  md: \"(max-width: 991px)\",\n  xl: \"(max-width: 1199px)\",\n  lg: \"(min-width: 1200px)\",\n};\n\nexport const { styled, css, keyframes, createTheme } = createStitches({\n  theme,\n  media,\n});\n", "import { styled } from \"@/stitches\";\nimport * as Collapsible from \"@radix-ui/react-collapsible\";\n\nconst MediaWrapper = styled(\"div\", {\n  position: \"relative\",\n  zIndex: \"0\",\n});\n\nconst Content = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"row\",\n  overflow: \"hidden\",\n\n  \"@sm\": {\n    flexDirection: \"column\",\n  },\n});\n\nconst Main = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  flexGrow: \"1\",\n  flexShrink: \"1\",\n  width: \"61.8%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst CollapsibleTrigger = styled(Collapsible.Trigger, {\n  display: \"none\",\n  background: \"transparent\",\n  border: \"none\",\n  margin: \"0\",\n  padding: \"0\",\n  transition: \"$all\",\n  opacity: \"1\",\n  marginTop: \"0\",\n\n  \"&[data-navigator='false']\": {\n    opacity: \"0\",\n    marginTop: \"-59px\",\n  },\n\n  \"@sm\": {\n    display: \"flex\",\n\n    \"> span\": {\n      display: \"flex\",\n      flexGrow: \"1\",\n      margin: \"1rem 1rem 0\",\n    },\n  },\n});\n\nconst CollapsibleContent = styled(Collapsible.Content, {\n  width: \"100%\",\n  display: \"flex\",\n});\n\nconst Aside = styled(\"aside\", {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  width: \"38.2%\",\n  maxHeight: \"100%\",\n\n  \"@sm\": {\n    width: \"100%\",\n  },\n});\n\nconst Wrapper = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontFamily: \"$sans\",\n  backgroundColor: \"$secondary\",\n  fontSmooth: \"auto\",\n  webkitFontSmoothing: \"antialiased\",\n\n  \"> div\": {\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: \"1\",\n    justifyContent: \"flex-start\",\n\n    \"@sm\": {\n      [`& ${Content}`]: {\n        flexGrow: \"1\",\n      },\n\n      [`& ${Main}`]: {\n        flexGrow: \"0\",\n      },\n    },\n  },\n\n  \"@sm\": {\n    padding: \"0\",\n  },\n\n  \"&[data-navigator-open='true']\": {\n    \"@sm\": {\n      position: \"fixed\",\n      height: \"100%\",\n      width: \"100%\",\n      top: \"0\",\n      left: \"0\",\n      zIndex: \"2500000000\",\n\n      [`& ${MediaWrapper}`]: {\n        display: \"none\",\n      },\n\n      [`& ${CollapsibleContent}`]: {\n        height: \"100%\",\n      },\n    },\n  },\n});\n\nexport {\n  Wrapper,\n  Content,\n  Main,\n  MediaWrapper,\n  CollapsibleContent,\n  CollapsibleTrigger,\n  Aside,\n};\n", "import { useEffect, useState } from \"react\";\n\nexport const useMediaQuery = (mediaQuery: string) => {\n  const match = () => {\n    if (!window.matchMedia) {\n      return false;\n    }\n    return window.matchMedia(mediaQuery).matches;\n  };\n\n  const [isMatch, setIsMatch] = useState<boolean>(match);\n\n  useEffect(() => {\n    const handler = () => setIsMatch(match);\n    window.addEventListener(\"resize\", handler);\n    return () => window.removeEventListener(\"resize\", handler);\n  });\n\n  return isMatch;\n};\n", "import { useEffect, useLayoutEffect, useState } from \"react\";\n\ntype ReturnType = [boolean, (locked: boolean) => void];\n\nexport const useBodyLocked = (initialLocked = false): ReturnType => {\n  const [locked, setLocked] = useState(initialLocked);\n\n  useLayoutEffect(() => {\n    if (!locked) {\n      return;\n    }\n\n    const originalOverflow = document.documentElement.style.overflow;\n\n    document.documentElement.style.overflow = \"hidden\";\n\n    return () => {\n      document.documentElement.style.overflow = originalOverflow;\n    };\n  }, [locked]);\n\n  useEffect(() => {\n    if (locked !== initialLocked) {\n      setLocked(initialLocked);\n    }\n  }, [initialLocked]);\n\n  return [locked, setLocked];\n};\n", "import React from \"react\";\nimport * as Switch from \"@radix-ui/react-switch\";\n\nimport {\n  Header,\n  IIIFBadgeButton,\n  IIIFBadgeContent,\n  ManifestLabel,\n} from \"./Header.styled\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Popover } from \"@nulib/design-system\";\nimport IIIFBadge from \"@/components/Viewer/IIIFBadge\";\nimport CopyText from \"@/components/CopyText\";\nimport { useViewerState } from \"@/context/viewer-context\";\nimport Collection from \"@/components/Collection/Collection\";\nimport { Label } from \"@samvera/nectar-iiif\";\nimport Toggle from \"./Toggle\";\n\ninterface Props {\n  manifestId: string;\n  manifestLabel: InternationalString;\n}\n\nconst ViewerHeader: React.FC<Props> = ({ manifestId, manifestLabel }) => {\n  const viewerState: any = useViewerState();\n  const { collection, configOptions } = viewerState;\n\n  const { showTitle, showIIIFBadge, showInformationToggle } = configOptions;\n\n  if (\n    !collection?.items &&\n    !showTitle &&\n    !showIIIFBadge &&\n    !showInformationToggle\n  )\n    return <></>;\n\n  return (\n    <Header className=\"clover-header\">\n      {collection?.items ? (\n        <Collection />\n      ) : (\n        <ManifestLabel>\n          <Label label={manifestLabel} />\n        </ManifestLabel>\n      )}\n      {showIIIFBadge && (\n        <Popover>\n          <IIIFBadgeButton>\n            <IIIFBadge />\n          </IIIFBadgeButton>\n          <IIIFBadgeContent>\n            {collection?.items && (\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  window.open(collection.id, \"_blank\");\n                }}\n              >\n                View Collection\n              </button>\n            )}\n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                window.open(manifestId, \"_blank\");\n              }}\n            >\n              View Manifest\n            </button>{\" \"}\n            {collection?.items && (\n              <CopyText\n                textPrompt=\"Copy Collection URL\"\n                textToCopy={collection.id}\n              />\n            )}\n            <CopyText textPrompt=\"Copy Manifest URL\" textToCopy={manifestId} />\n          </IIIFBadgeContent>\n        </Popover>\n      )}\n      {showInformationToggle && <Toggle />}\n    </Header>\n  );\n};\n\nexport default ViewerHeader;\n", "import { styled } from \"@/stitches\";\nimport { Popover } from \"@nulib/design-system\";\nimport { CollectionStyled } from \"@/components/Collection/Collection.styled\";\n\nconst IIIFBadgeButton = styled(Popover.Trigger, {\n  width: \"30px\",\n  padding: \"5px\",\n  margin: \"0 0 0 2rem\",\n});\n\nconst IIIFBadgeContent = styled(Popover.Content, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  fontSize: \"0.8333rem\",\n  border: \"none\",\n  boxShadow: \"2px 2px 5px #0003\",\n  zIndex: \"2\",\n\n  button: {\n    display: \"flex\",\n    textDecoration: \"none\",\n    fontFamily: \"$sans\",\n    marginBottom: \"0.5em\",\n    color: \"$accentAlt\",\n    cursor: \"pointer\",\n    background: \"$secondary\",\n    border: \"none\",\n\n    [\"&:last-child\"]: {\n      marginBottom: \"0\",\n    },\n  },\n});\n\nconst ManifestLabel = styled(\"span\", {\n  fontSize: \"1.25rem\",\n  fontWeight: \"700\",\n  fontFamily: \"$display\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n\n  \"@sm\": {\n    fontSize: \"1rem\",\n  },\n});\n\nconst Header = styled(\"header\", {\n  display: \"flex\",\n  backgroundColor: \"transparent !important\",\n  justifyContent: \"flex-end\",\n  padding: \"1rem\",\n\n  [`> ${CollectionStyled}`]: {\n    flexGrow: \"1\",\n    flexShrink: \"0\",\n  },\n\n  form: {\n    flexGrow: \"0\",\n    flexShrink: \"1\",\n  },\n});\n\nexport { Header, IIIFBadgeButton, IIIFBadgeContent, ManifestLabel };\n", "import * as Select from \"@radix-ui/react-select\";\nimport { styled } from \"@/stitches\";\n\nconst CollectionIcon = styled(\"svg\", {\n  height: \"19px\",\n  color: \"$accent\",\n  fill: \"$accent\",\n  stroke: \"$accent\",\n  display: \"flex\",\n  margin: \"0.25rem 0.85rem\",\n});\n\nconst CollectionButton = styled(Select.Trigger, {\n  fontSize: \"1.25rem\",\n  fontWeight: \"400\",\n  fontFamily: \"$display\",\n  alignSelf: \"flex-start\",\n  flexGrow: \"1\",\n  backgroundColor: \"$secondary\",\n  cursor: \"pointer\",\n  transition: \"$all\",\n  border: \"1px solid $secondaryMuted\",\n  boxShadow: \"2px 2px 5px #0001\",\n  borderRadius: \"3px\",\n  display: \"flex\",\n  alignItems: \"center\",\n  paddingLeft: \"0.5rem\",\n\n  \"@sm\": {\n    fontSize: \"1rem\",\n  },\n});\n\nconst CollectionContent = styled(Select.Content, {\n  borderRadius: \"3px\",\n  boxShadow: \"3px 3px 8px #0003\",\n  backgroundColor: \"$secondary\",\n  marginTop: \"2.25rem\",\n  marginLeft: \"6px\",\n  paddingBottom: \"0.25rem\",\n  maxHeight: \"calc(61.8vh - 2.5rem) !important\",\n  borderTopLeftRadius: \"0\",\n  border: \"1px solid $secondaryMuted\",\n  maxWidth: \"90vw\",\n});\n\nconst CollectionItem = styled(Select.Item, {\n  display: \"flex\",\n  alignItems: \"center\",\n  fontFamily: \"$sans\",\n  padding: \"0.25rem 0.5rem\",\n  color: \"$primary\",\n  fontWeight: \"400\",\n  fontSize: \"0.8333rem\",\n  cursor: \"pointer\",\n  backgroundColor: \"$secondary\",\n  width: \"calc(100% - 1rem)\",\n\n  \"> span\": {\n    whiteSpace: \"nowrap\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n  },\n\n  '&[data-state=\"checked\"]': {\n    fontWeight: \"700\",\n    color: \"$primary !important\",\n  },\n\n  \"&:hover\": {\n    color: \"$accent\",\n  },\n\n  img: {\n    width: \"31px\",\n    height: \"31px\",\n    marginRight: \"0.5rem\",\n    borderRadius: \"3px\",\n  },\n});\n\nconst CollectionLabel = styled(Select.Label, {\n  color: \"$primaryMuted\",\n  fontFamily: \"$sans\",\n  fontSize: \"0.85rem\",\n  padding: \"0.5rem 1rem 0.5rem 0.5rem\",\n  display: \"flex\",\n  alignItems: \"center\",\n  marginBottom: \"0.25rem\",\n  borderRadius: \"3px\",\n  borderTopLeftRadius: \"0\",\n  borderBottomLeftRadius: \"0\",\n  borderBottomRightRadius: \"0\",\n  backgroundColor: \"$secondaryMuted\",\n});\n\nconst CollectionStyled = styled(\"div\", {\n  position: \"relative\",\n  zIndex: \"5\",\n});\n\nexport {\n  CollectionButton,\n  CollectionContent,\n  CollectionItem,\n  CollectionLabel,\n  CollectionIcon,\n  CollectionStyled,\n};\n", "import React from \"react\";\n\nconst IIIFBadge: React.FC = () => {\n  const red = \"#ed1d33\";\n  const blue = \"#2873ab\";\n\n  return (\n    <svg viewBox=\"0 0 493.35999 441.33334\" id=\"iiif-logo\" version=\"1.1\">\n      <title>IIIF Manifest Options</title>\n      <g transform=\"matrix(1.3333333,0,0,-1.3333333,0,441.33333)\">\n        <g transform=\"scale(0.1)\">\n          <path\n            style={{ fill: blue }}\n            d=\"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5\"\n          />\n          <path\n            style={{ fill: blue }}\n            d=\"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18\"\n          />\n          <path\n            style={{ fill: red }}\n            d=\"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950\"\n          />\n        </g>\n      </g>\n    </svg>\n  );\n};\n\nexport default IIIFBadge;\n", "import React from \"react\";\nimport { styled } from \"@/stitches\";\nimport { useCopyToClipboard, CopyStatus } from \"@/hooks/useCopyToClipboard\";\n\nconst Status = styled(\"span\", {\n  display: \"flex\",\n  alignContent: \"center\",\n  alignItems: \"center\",\n  padding: \"0.125rem 0.25rem 0\",\n  marginTop: \"-0.125rem\",\n  marginLeft: \"0.5rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  borderRadius: \"3px\",\n  fontSize: \"0.6111rem\",\n  textTransform: \"uppercase\",\n  lineHeight: \"1em\",\n});\n\nconst CopyTextStatus: React.FC<{ status: CopyStatus }> = ({ status }) => {\n  if (!status) return null;\n\n  return <Status data-copy-status={status}>{status}</Status>;\n};\n\nexport const CopyText: React.FC<{ textPrompt: string; textToCopy: string }> = ({\n  textPrompt,\n  textToCopy,\n}) => {\n  const [copyStatus, copyText] = useCopyToClipboard(textToCopy);\n  return (\n    <button onClick={copyText}>\n      {textPrompt} <CopyTextStatus status={copyStatus} />\n    </button>\n  );\n};\n\nexport default CopyText;\n", "import { useCallback, useEffect, useState } from \"react\";\n\nexport type CopyStatus = undefined | \"copied\" | \"failed\";\n\nexport const useCopyToClipboard = (\n  text: string,\n  notifyTimeout = 2500,\n): [CopyStatus, () => void] => {\n  const [copyStatus, setCopyStatus] = useState<CopyStatus>();\n  const copy = useCallback(() => {\n    navigator.clipboard.writeText(text).then(\n      () => setCopyStatus(\"copied\"),\n      () => setCopyStatus(\"failed\"),\n    );\n  }, [text]);\n\n  useEffect(() => {\n    if (!copyStatus) {\n      return;\n    }\n\n    const timeoutId = setTimeout(() => setCopyStatus(undefined), notifyTimeout);\n\n    return () => clearTimeout(timeoutId);\n  }, [copyStatus]);\n\n  return [copyStatus, copy];\n};\n", "import * as Select from \"@radix-ui/react-select\";\nimport {\n  CollectionButton,\n  CollectionContent,\n  CollectionItem,\n  CollectionLabel,\n  CollectionStyled,\n} from \"@/components/Collection/Collection.styled\";\nimport { Label, Thumbnail } from \"@samvera/nectar-iiif\";\nimport { useViewerDispatch, useViewerState } from \"@/context/viewer-context\";\nimport React from \"react\";\nimport { CollectionItems } from \"@iiif/presentation-3\";\nimport Icon from \"@/components/Collection/Icon\";\n\nconst Collection: React.FC = () => {\n  const dispatch: any = useViewerDispatch();\n  const viewerState: any = useViewerState();\n\n  const { activeManifest, collection, configOptions, vault } = viewerState;\n  const maxHeight = configOptions?.canvasHeight;\n\n  const handleValueChange = (manifestId: string) => {\n    dispatch({\n      type: \"updateActiveManifest\",\n      manifestId: manifestId,\n    });\n  };\n\n  return (\n    <CollectionStyled>\n      <Select.Root value={activeManifest} onValueChange={handleValueChange}>\n        <CollectionButton>\n          <Select.Value />\n          <Select.Icon>\n            <Icon direction=\"down\" title=\"select from collection\" />\n          </Select.Icon>\n        </CollectionButton>\n        <CollectionContent css={{ maxHeight: `${maxHeight} !important` }}>\n          <Select.ScrollUpButton>\n            <Icon direction=\"up\" title=\"scroll up for more\" />\n          </Select.ScrollUpButton>\n          <Select.Viewport>\n            <Select.Group>\n              <CollectionLabel>\n                <Label label={collection.label} />\n              </CollectionLabel>\n              {collection.items.map((item: CollectionItems) => (\n                <CollectionItem value={item.id} key={item.id}>\n                  <Thumbnail thumbnail={vault.get(item.thumbnail)} />\n                  <Select.ItemText>\n                    <Label label={item.label} />\n                  </Select.ItemText>\n                  <Select.ItemIndicator />\n                </CollectionItem>\n              ))}\n            </Select.Group>\n          </Select.Viewport>\n          <Select.ScrollDownButton>\n            <Icon direction=\"down\" title=\"scroll down for more\" />\n          </Select.ScrollDownButton>\n        </CollectionContent>\n      </Select.Root>\n    </CollectionStyled>\n  );\n};\n\nexport default Collection;\n", "import React from \"react\";\nimport { CollectionIcon } from \"./Collection.styled\";\n\ninterface SelectIconProps {\n  direction: \"up\" | \"down\";\n  title: string;\n}\n\nconst SelectIcon: React.FC<SelectIconProps> = ({ direction, title }) => {\n  const CaretUp = () => {\n    return (\n      <path d=\"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z\" />\n    );\n  };\n\n  const CaretDown = () => {\n    return (\n      <path d=\"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z\" />\n    );\n  };\n\n  return (\n    <CollectionIcon\n      xmlns=\"http://www.w3.org/2000/svg\"\n      focusable=\"false\"\n      viewBox=\"0 0 512 512\"\n      role=\"img\"\n    >\n      <title>{title}</title>\n      {direction === \"up\" && <CaretUp />}\n      {direction === \"down\" && <CaretDown />}\n    </CollectionIcon>\n  );\n};\n\nexport default SelectIcon;\n", "import { useViewerDispatch } from \"@/context/viewer-context\";\nimport React, { useEffect, useState } from \"react\";\nimport {\n  Label,\n  StyledSwitch,\n  StyledThumb,\n  StyledToggle,\n  Wrapper,\n} from \"@/components/Viewer/Toggle.styled\";\n\nconst Toggle = () => {\n  const dispatch: any = useViewerDispatch();\n\n  const [checked, setChecked] = useState(true);\n\n  useEffect(() => {\n    dispatch({\n      type: \"updateInformationExpanded\",\n      informationExpanded: checked,\n    });\n  }, [checked]);\n\n  return (\n    <StyledToggle>\n      <Wrapper>\n        <Label\n          htmlFor=\"information-toggle\"\n          css={checked ? { opacity: \"1\" } : {}}\n        >\n          More Information\n        </Label>\n        <StyledSwitch\n          checked={checked}\n          onCheckedChange={() => setChecked(!checked)}\n          id=\"information-toggle\"\n        >\n          <StyledThumb />\n        </StyledSwitch>\n      </Wrapper>\n    </StyledToggle>\n  );\n};\n\nexport default Toggle;\n", "import { styled } from \"@/stitches\";\nimport * as Switch from \"@radix-ui/react-switch\";\n\nconst StyledSwitch = styled(Switch.Root, {\n  all: \"unset\",\n  height: \"2rem\",\n  width: \"3.236rem\",\n  backgroundColor: \"$secondaryAlt\",\n  borderRadius: \"9999px\",\n  position: \"relative\",\n  WebkitTapHighlightColor: \"transparent\",\n  cursor: \"pointer\",\n\n  \"&:focus\": {\n    boxShadow: `0 0 0 2px $secondaryAlt`,\n  },\n\n  '&[data-state=\"checked\"]': {\n    backgroundColor: \"$accent\",\n    boxShadow: `inset 2px 2px 5px #0003`,\n  },\n});\n\nconst StyledThumb = styled(Switch.Thumb, {\n  display: \"block\",\n  height: \"calc(2rem - 12px)\",\n  width: \"calc(2rem - 12px)\",\n  backgroundColor: \"$secondary\",\n  borderRadius: \"100%\",\n  boxShadow: `2px 2px 5px #0001`,\n  transition: \"$all\",\n  transform: \"translateX(6px)\",\n  willChange: \"transform\",\n\n  '&[data-state=\"checked\"]': {\n    transform: \"translateX(calc(1.236rem + 6px))\",\n  },\n});\n\nconst Wrapper = styled(\"div\", {\n  display: \"flex\",\n  alignItems: \"center\",\n  paddingLeft: \"1.618rem\",\n});\n\nconst Label = styled(\"label\", {\n  fontSize: \"0.8333rem\",\n  fontFamily: \"$sans\",\n  fontWeight: \"400\",\n  lineHeight: \"1em\",\n  userSelect: \"none\",\n  cursor: \"pointer\",\n  color: \"$primary\",\n  opacity: \"0.7\",\n  paddingRight: \"0.618rem\",\n});\n\nconst StyledToggle = styled(\"form\", {});\n\nexport { Label, StyledSwitch, StyledThumb, StyledToggle, Wrapper };\n", "import React from \"react\";\nimport Media from \"@/components/Media/Media\";\nimport Navigator from \"@/components/Navigator/Navigator\";\nimport Player from \"@/components/Player/Player\";\nimport ImageViewer from \"@/components/ImageViewer/ImageViewer\";\nimport { Button } from \"@nulib/design-system\";\nimport { Canvas, IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport {\n  Content,\n  Main,\n  CollapsibleTrigger,\n  CollapsibleContent,\n  MediaWrapper,\n  Aside,\n} from \"@/components/Viewer/Viewer.styled\";\nimport { LabeledResource } from \"@/hooks/use-iiif/getSupplementingResources\";\nimport { CurrentTimeProvider } from \"@/context/current-time-context\";\n\ninterface Props {\n  activeCanvas: string;\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n  items: Canvas[];\n  isAbout: boolean;\n  isInformation: boolean;\n  isMedia: boolean;\n  isNavigator: boolean;\n  isNavigatorOpen: boolean;\n}\n\nconst ViewerContent: React.FC<Props> = ({\n  activeCanvas,\n  painting,\n  resources,\n  items,\n  isAbout,\n  isInformation,\n  isNavigator,\n  isNavigatorOpen,\n  isMedia,\n}) => {\n  return (\n    <Content className=\"clover-content\">\n      <CurrentTimeProvider>\n        <Main>\n          {isMedia ? (\n            <Player\n              painting={painting as IIIFExternalWebResource}\n              resources={resources}\n            />\n          ) : (\n            painting && <ImageViewer body={painting} key={activeCanvas} />\n          )}\n          <CollapsibleTrigger>\n            <Button as=\"span\">\n              {isNavigatorOpen ? \"View Items\" : \"More Information\"}\n            </Button>\n          </CollapsibleTrigger>\n          {items.length > 1 && (\n            <MediaWrapper className=\"clover-canvases\">\n              <Media items={items} activeItem={0} />\n            </MediaWrapper>\n          )}\n        </Main>\n        {isInformation && (isAbout || isNavigator) && (\n          <Aside>\n            <CollapsibleContent>\n              <Navigator activeCanvas={activeCanvas} resources={resources} />\n            </CollapsibleContent>\n          </Aside>\n        )}\n      </CurrentTimeProvider>\n    </Content>\n  );\n};\n\nexport default ViewerContent;\n", "import React, { useEffect, useState } from \"react\";\nimport { Group } from \"@/components/Media/Media.styled\";\nimport { CanvasEntity } from \"@/hooks/use-iiif/getCanvasByCriteria\";\nimport { getCanvasByCriteria, getLabel, getThumbnail } from \"@/hooks/use-iiif\";\nimport {\n  Canvas,\n  CanvasNormalized,\n  ExternalResourceTypes,\n} from \"@iiif/presentation-3\";\nimport { useViewerState, useViewerDispatch } from \"@/context/viewer-context\";\nimport Thumbnail from \"@/components/Media/Thumbnail\";\nimport { getResourceType } from \"@/hooks/use-iiif/getResourceType\";\nimport Controls from \"@/components/Media/Controls\";\n\ninterface MediaProps {\n  items: Canvas[];\n  activeItem: number;\n}\n\nconst Media: React.FC<MediaProps> = ({ items }) => {\n  const dispatch: any = useViewerDispatch();\n  const state: any = useViewerState();\n  const { activeCanvas, vault } = state;\n\n  const [filter, setFilter] = useState<String>(\"\");\n  const [mediaItems, setMediaItems] = useState<Array<CanvasEntity>>([]);\n  const [activeIndex, setActiveIndex] = useState<number>(0);\n\n  const scrollRef = React.useRef<HTMLDivElement>(null);\n\n  const motivation = \"painting\";\n  // TODO: Type this as an enum\n  const paintingType: ExternalResourceTypes[] = [\"Image\", \"Sound\", \"Video\"];\n\n  const handleChange = (canvasId: string) => {\n    if (activeCanvas !== canvasId)\n      dispatch({\n        type: \"updateActiveCanvas\",\n        canvasId: canvasId,\n      });\n  };\n\n  useEffect(() => {\n    if (!mediaItems.length) {\n      const entities: CanvasEntity[] = items\n        .map((item) =>\n          getCanvasByCriteria(vault, item, motivation, paintingType),\n        )\n        .filter((canvasEntity) => canvasEntity.annotations.length > 0);\n      setMediaItems(entities);\n    }\n  }, []);\n\n  useEffect(() => {\n    mediaItems.forEach((item, index) => {\n      if (item?.canvas)\n        if (item.canvas.id === activeCanvas) setActiveIndex(index);\n    });\n  }, [activeCanvas]);\n\n  useEffect(() => {\n    const element = document.querySelector<HTMLElement>(\n      `[data-canvas=\"${activeIndex}\"]`,\n    ) as Element;\n\n    if (element instanceof HTMLElement && scrollRef.current) {\n      const leftPos =\n        element.offsetLeft -\n        scrollRef.current.offsetWidth / 2 +\n        element.offsetWidth / 2;\n      scrollRef.current.scrollTo({ left: leftPos, behavior: \"smooth\" });\n    }\n  }, [activeIndex]);\n\n  const handleFilter = (value: String) => setFilter(value);\n\n  const handleCanvasToggle = (step: -1 | 1) => {\n    const canvasEntity = mediaItems[activeIndex + step];\n    if (canvasEntity?.canvas) handleChange(canvasEntity.canvas.id);\n  };\n\n  return (\n    <>\n      <Controls\n        handleFilter={handleFilter}\n        handleCanvasToggle={handleCanvasToggle}\n        activeIndex={activeIndex}\n        canvasLength={mediaItems.length}\n      />\n      <Group aria-label=\"select item\" data-testid=\"media\" ref={scrollRef}>\n        {mediaItems\n          .filter((item) => {\n            if (item.canvas?.label) {\n              const label = getLabel(item.canvas.label);\n              if (Array.isArray(label))\n                return label[0].toLowerCase().includes(filter.toLowerCase());\n            }\n          })\n          .map((item, index) => (\n            <Thumbnail\n              canvas={item.canvas as CanvasNormalized}\n              canvasIndex={index}\n              handleChange={handleChange}\n              isActive={activeCanvas === item?.canvas?.id ? true : false}\n              key={item?.canvas?.id}\n              thumbnail={getThumbnail(vault, item, 200, 200)}\n              type={getResourceType(item.annotations[0])}\n            />\n          ))}\n      </Group>\n    </>\n  );\n};\n\nexport default Media;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"@/stitches\";\n\nconst Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexGrow: \"1\",\n  padding: \"1.618rem\",\n  overflowX: \"scroll\",\n  position: \"relative\",\n  zIndex: \"0\",\n});\n\nexport { Group };\n", "import React from \"react\";\nimport { convertTime } from \"@/services/utils\";\nimport {\n  CanvasNormalized,\n  IIIFExternalWebResource,\n} from \"@iiif/presentation-3\";\nimport { Icon, Tag } from \"@nulib/design-system\";\nimport {\n  Duration,\n  Item,\n  Spacer,\n  Type,\n} from \"@/components/Media/Thumbnail.styled\";\nimport { Label } from \"@samvera/nectar-iiif\";\nimport { getLabel } from \"@/hooks/use-iiif\";\n\n/**\n * Determine appropriate icon by resource type\n */\ninterface IconPathProps {\n  type: string;\n}\n\nconst IconPath: React.FC<IconPathProps> = ({ type }) => {\n  switch (type) {\n    case \"Sound\":\n      return <Icon.Audio />;\n    case \"Image\":\n      return <Icon.Image />;\n    case \"Video\":\n      return <Icon.Video />;\n    default:\n      return <Icon.Image />;\n  }\n};\n\n/**\n * Render thumbnail for IIIF canvas item\n */\nexport interface ThumbnailProps {\n  canvas: CanvasNormalized;\n  canvasIndex: number;\n  isActive: boolean;\n  thumbnail?: IIIFExternalWebResource;\n  type: string;\n  handleChange: (arg0: string) => void;\n}\n\nconst Thumbnail: React.FC<ThumbnailProps> = ({\n  canvas,\n  canvasIndex,\n  isActive,\n  thumbnail,\n  type,\n  handleChange,\n}) => {\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"media-thumbnail\"\n      data-canvas={canvasIndex}\n      onClick={() => handleChange(canvas.id)}\n      value={canvas.id}\n    >\n      <figure>\n        <div>\n          {thumbnail?.id && (\n            <img\n              src={thumbnail.id}\n              alt={canvas?.label ? (getLabel(canvas.label) as string) : \"\"}\n            />\n          )}\n\n          <Type>\n            <Tag isIcon data-testid=\"thumbnail-tag\">\n              <Spacer />\n              <Icon aria-label={type}>\n                <IconPath type={type} />\n              </Icon>\n              {[\"Video\", \"Sound\"].includes(type) && (\n                <Duration>{convertTime(canvas.duration as number)}</Duration>\n              )}\n            </Tag>\n          </Type>\n        </div>\n        {canvas?.label && (\n          <figcaption data-testid=\"fig-caption\">\n            <Label label={canvas.label} />\n          </figcaption>\n        )}\n      </figure>\n    </Item>\n  );\n};\n\nexport default Thumbnail;\n", "export const cleanTime = (standardNotation: string) => {\n  var array = standardNotation.toString().split(\":\");\n  var hours: number = Math.ceil(parseInt(array[0]));\n  var minutes: number = Math.ceil(parseInt(array[1]));\n  var seconds: string = zeroPad(Math.ceil(parseInt(array[2])), 2);\n\n  // Insure time with Hours is formatted as \"HH:MM:SS\"\n  let formattedMinutes =\n    hours !== 0 && minutes < 10 ? (minutes + \"\").padStart(2, \"0\") : minutes;\n\n  let time: string = `${formattedMinutes}:${seconds}`;\n\n  if (hours !== 0) {\n    time = `${hours}:${time}`;\n  }\n\n  return time;\n};\n\nexport const convertTime = (duration: number) => {\n  const standardNotation: string = new Date(duration * 1000)\n    .toISOString()\n    .substr(11, 8);\n  return cleanTime(standardNotation);\n};\n\nexport const convertTimeToSeconds = (standardNotation: string) => {\n  var hms: Array<string> = standardNotation.split(\":\");\n  var seconds: number = +hms[0] * 60 * 60 + +hms[1] * 60 + +hms[2];\n  return seconds;\n};\n\nconst zeroPad = (num: number, places: number) =>\n  String(num).padStart(places, \"0\");\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled } from \"@/stitches\";\nimport { Tag } from \"@nulib/design-system\";\n\nconst Type = styled(\"span\", {\n  display: \"flex\",\n});\n\nconst Spacer = styled(\"span\", {\n  display: \"flex\",\n  width: \"1.2111rem\",\n  height: \"0.7222rem\",\n});\n\nconst Duration = styled(\"span\", {\n  display: \"inline-flex\",\n  marginLeft: \"5px\",\n  marginBottom: \"-1px\",\n});\n\nconst Item = styled(RadioGroup.Item, {\n  display: \"flex\",\n  flexShrink: \"0\",\n  margin: \"0 1.618rem 0 0\",\n  padding: \"0\",\n  cursor: \"pointer\",\n  background: \"none\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  textAlign: \"left\",\n\n  \"&:last-child\": {\n    marginRight: \"1rem\",\n  },\n\n  figure: {\n    margin: \"0\",\n    width: \"161.8px\",\n\n    \"> div\": {\n      position: \"relative\",\n      display: \"flex\",\n      backgroundColor: \"$secondaryAlt\",\n      width: \"inherit\",\n      height: \"100px\",\n      overflow: \"hidden\",\n      borderRadius: \"3px\",\n      transition: \"$all\",\n\n      img: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\",\n        filter: \"blur(0)\",\n        transform: \"scale3d(1, 1, 1)\",\n        transition: \"$all\",\n        color: \"transparent\",\n      },\n\n      [`& ${Type}`]: {\n        position: \"absolute\",\n        right: \"0\",\n        bottom: \"0\",\n\n        [`& ${Tag}`]: {\n          margin: \"0\",\n          paddingLeft: \"0\",\n          fontSize: \"0.7222rem\",\n          backgroundColor: \"#000d\",\n          color: \"$secondary\",\n          fill: \"$secondary\",\n          borderBottomLeftRadius: \"0\",\n          borderTopRightRadius: \"0\",\n        },\n      },\n    },\n\n    figcaption: {\n      marginTop: \"0.5rem\",\n      color: \"$primaryMuted\",\n      fontWeight: \"400\",\n      fontSize: \"0.8333rem\",\n      display: \"-webkit-box\",\n      overflow: \"hidden\",\n      MozBoxOrient: \"vertical\",\n      WebkitLineClamp: \"5\",\n\n      \"@sm\": {\n        fontSize: \"0.8333rem\",\n      },\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    figure: {\n      \"> div\": {\n        backgroundColor: \"$primaryAlt\",\n\n        \"&::before\": {\n          position: \"absolute\",\n          zIndex: \"1\",\n          color: \"$secondaryMuted\",\n          content: \"Active Item\",\n          textTransform: \"uppercase\",\n          fontWeight: \"700\",\n          fontSize: \"0.6111rem\",\n          letterSpacing: \"0.03rem\",\n          display: \"flex\",\n          width: \"100%\",\n          height: \"100%\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          textShadow: \"5px 5px 5px #0003\",\n        },\n\n        img: {\n          opacity: \"0.3\",\n          transform: \"scale3d(1.1, 1.1, 1.1)\",\n          filter: \"blur(2px)\",\n        },\n\n        [`& ${Type}`]: {\n          [`& ${Tag}`]: {\n            backgroundColor: \"$accent\",\n          },\n        },\n      },\n    },\n\n    figcaption: {\n      fontWeight: \"700\",\n      color: \"$primary\",\n    },\n  },\n});\n\nexport { Duration, Item, Spacer, Type };\n", "export const getResourceType = (annotation: any): string => {\n  if (!annotation.body) return \"Image\";\n\n  return annotation.body.type;\n};\n", "import React, { useEffect, useState } from \"react\";\nimport {\n  Button,\n  Direction,\n  Form,\n  Input,\n  Wrapper,\n} from \"@/components/Media/Controls.styled\";\nimport useKeyPress from \"@/hooks/useKeyPress\";\n\ninterface Props {\n  handleCanvasToggle: (arg0: -1 | 1) => void;\n  handleFilter: (arg0: String) => void;\n  activeIndex: number;\n  canvasLength: number;\n}\nconst PreviousIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Back</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M244 400L100 256l144-144M120 256h292\"\n      />\n    </svg>\n  );\n};\n\nconst NextIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Arrow Forward</title>\n      <path\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M268 112l144 144-144 144M392 256H100\"\n      />\n    </svg>\n  );\n};\n\nconst CloseIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Close</title>\n      <path d=\"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z\" />\n    </svg>\n  );\n};\n\nconst SearchIcon: React.FC = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n      <title>Search</title>\n      <path d=\"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z\" />\n    </svg>\n  );\n};\n\nconst Controls: React.FC<Props> = ({\n  handleCanvasToggle,\n  handleFilter,\n  activeIndex,\n  canvasLength,\n}) => {\n  const [toggleFilter, setToggleFilter] = useState<boolean>(false);\n  const [isNextDisabled, setIsNextDisabled] = useState<boolean>(false);\n  const [isPreviousDisabled, setIsPreviousDisabled] = useState<boolean>(false);\n\n  useEffect(() => {\n    activeIndex === 0\n      ? setIsPreviousDisabled(true)\n      : setIsPreviousDisabled(false);\n    activeIndex === canvasLength - 1\n      ? setIsNextDisabled(true)\n      : setIsNextDisabled(false);\n  }, [activeIndex]);\n\n  /**\n   * dismiss filtering if Escape key is pressed\n   */\n  useKeyPress(\"Escape\", () => {\n    setToggleFilter(false);\n    handleFilter(\"\");\n  });\n\n  /**\n   * reset filtering on manual toggle button press\n   */\n  const handleFilterToggle = () => {\n    setToggleFilter((prevToggleFilter) => !prevToggleFilter);\n    handleFilter(\"\");\n  };\n\n  /**\n   * handle value changes on Input\n   */\n  const handleFilterChange = (event: React.ChangeEvent<HTMLInputElement>) =>\n    handleFilter(event.target.value);\n\n  return (\n    <Wrapper isToggle={toggleFilter}>\n      <Form>\n        {toggleFilter && (\n          <Input autoFocus onChange={handleFilterChange} placeholder=\"Search\" />\n        )}\n        {!toggleFilter && (\n          <Direction>\n            <Button\n              onClick={() => handleCanvasToggle(-1)}\n              disabled={isPreviousDisabled}\n              type=\"button\"\n            >\n              <PreviousIcon />\n            </Button>\n            <span>\n              {activeIndex + 1} of {canvasLength}\n            </span>\n            <Button\n              onClick={() => handleCanvasToggle(1)}\n              disabled={isNextDisabled}\n              type=\"button\"\n            >\n              <NextIcon />\n            </Button>\n          </Direction>\n        )}\n        <Button onClick={handleFilterToggle} type=\"button\">\n          {toggleFilter ? <CloseIcon /> : <SearchIcon />}\n        </Button>\n      </Form>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import { styled } from \"@/stitches\";\n\nconst Form = styled(\"div\", {\n  position: \"absolute\",\n  right: \"1rem\",\n  top: \"1rem\",\n  display: \"flex\",\n  justifyContent: \"flex-end\",\n  zIndex: \"1\",\n});\n\nconst Input = styled(\"input\", {\n  flexGrow: \"1\",\n  border: \"none\",\n  backgroundColor: \"$secondaryMuted\",\n  color: \"$primary\",\n  marginRight: \"1rem\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"2rem\",\n  fontFamily: \"$sans\",\n  fontSize: \"1rem\",\n  lineHeight: \"1rem\",\n  boxShadow: \"inset 1px 1px 2px #0003\",\n\n  \"&::placeholder\": {\n    color: \"$primaryMuted\",\n  },\n});\n\nconst Button = styled(\"button\", {\n  display: \"flex\",\n  background: \"none\",\n  border: \"none\",\n  width: \"2rem !important\",\n  height: \"2rem !important\",\n  padding: \"0\",\n  margin: \"0\",\n  fontWeight: \"700\",\n  borderRadius: \"2rem\",\n  backgroundColor: \"$accent\",\n  color: \"$secondary\",\n  cursor: \"pointer\",\n  boxSizing: \"content-box !important\",\n  transition: \"$all\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    opacity: \"1\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    boxSizing: \"inherit\",\n    transition: \"$all\",\n  },\n\n  \"&:disabled\": {\n    backgroundColor: \"transparent\",\n    boxShadow: \"none\",\n    svg: { opacity: \"0.25\" },\n  },\n});\n\nconst Direction = styled(\"div\", {\n  display: \"flex\",\n  marginRight: \"0.618rem\",\n  backgroundColor: \"$accentAlt\",\n  borderRadius: \"2rem\",\n  boxShadow: \"5px 5px 5px #0003\",\n  color: \"$secondary\",\n  alignItems: \"center\",\n\n  \"> span\": {\n    display: \"flex\",\n    margin: \"0 0.5rem\",\n    fontSize: \"0.7222rem\",\n  },\n});\n\nconst Wrapper = styled(\"div\", {\n  display: \"flex\",\n  position: \"relative\",\n  zIndex: \"1\",\n  width: \"100%\",\n  padding: \"0\",\n  transition: \"$all\",\n\n  variants: {\n    isToggle: {\n      true: {\n        paddingTop: \"2.618rem\",\n\n        [`& ${Form}`]: {\n          width: \"calc(100% - 2rem)\",\n\n          \"@sm\": {\n            width: \"calc(100% - 2rem)\",\n          },\n        },\n      },\n    },\n  },\n});\n\nexport { Button, Direction, Form, Input, Wrapper };\n", "import { useEffect } from \"react\";\n/**\n * useKeyPress\n * @param {string} key - the name of the key to respond to, compared against event.key\n * @param {function} action - the action to perform on key press\n */\nconst useKeyPress = (key: string, action: () => void) => {\n  useEffect(() => {\n    function onKeyup(e: KeyboardEvent) {\n      if (e.key === key) action();\n    }\n    window.addEventListener(\"keyup\", onKeyup);\n    return () => window.removeEventListener(\"keyup\", onKeyup);\n  }, []);\n};\n\nexport default useKeyPress;\n", "import React, { useEffect, useState } from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport {\n  Content,\n  List,\n  Scroll,\n  Trigger,\n  Wrapper,\n} from \"@/components/Navigator/Navigator.styled\";\nimport { LabeledResource } from \"@/hooks/use-iiif/getSupplementingResources\";\nimport Resource from \"@/components/Navigator/Resource\";\nimport { Label } from \"@samvera/nectar-iiif\";\nimport Information from \"@/components/Navigator/About/About\";\nimport { useViewerState } from \"@/context/viewer-context\";\n\ninterface NavigatorProps {\n  activeCanvas: string;\n  resources?: Array<LabeledResource>;\n}\n\nexport const Navigator: React.FC<NavigatorProps> = ({\n  activeCanvas,\n  resources,\n}) => {\n  const viewerState: any = useViewerState();\n  const { configOptions } = viewerState;\n  const { renderAbout } = configOptions;\n\n  const [activeResource, setActiveResource] = useState<string>();\n\n  useEffect(() => {\n    if (renderAbout) {\n      setActiveResource(\"manifest-about\");\n    } else if (resources && resources?.length > 0 && !renderAbout) {\n      setActiveResource(resources[0].id);\n    }\n  }, [activeCanvas, resources]);\n\n  const handleValueChange = (value: string) => {\n    setActiveResource(value);\n  };\n\n  if (!resources) return <></>;\n\n  return (\n    <Wrapper\n      data-testid=\"navigator\"\n      defaultValue={activeResource}\n      onValueChange={handleValueChange}\n      orientation=\"horizontal\"\n      value={activeResource}\n    >\n      <List aria-label=\"select chapter\" data-testid=\"navigator-list\">\n        {renderAbout && <Trigger value=\"manifest-about\">About</Trigger>}\n        {resources &&\n          resources.map(({ id, label }) => (\n            <Trigger key={id} value={id as string}>\n              <Label label={label} />\n            </Trigger>\n          ))}\n      </List>\n      <Scroll>\n        {renderAbout && (\n          <Content value=\"manifest-about\">\n            <Information />\n          </Content>\n        )}\n        {resources &&\n          resources.map((resource) => {\n            return (\n              <Content key={resource.id} value={resource.id as string}>\n                <Resource resource={resource} />\n              </Content>\n            );\n          })}\n      </Scroll>\n    </Wrapper>\n  );\n};\n\nexport default Navigator;\n", "import * as Tabs from \"@radix-ui/react-tabs\";\nimport { styled } from \"@/stitches\";\n\nconst Wrapper = styled(Tabs.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"relative\",\n  zIndex: \"1\",\n  boxShadow: \"-5px -5px 5px #00000011\",\n\n  \"@sm\": {\n    marginTop: \"0.5rem\",\n    boxShadow: \"none\",\n  },\n\n  \"&:after\": {\n    position: \"absolute\",\n    bottom: 0,\n    content: \"\",\n    width: \"100%\",\n    height: \"1rem\",\n    backgroundImage: `linear-gradient(0deg, #FFFFFF 0%, #FFFFFF00 100%)`,\n    zIndex: 1,\n\n    \"@sm\": {\n      backgroundImage: \"none\",\n    },\n  },\n});\n\nconst List = styled(Tabs.List, {\n  display: \"flex\",\n  flexGrow: \"0\",\n  margin: \"0 1.618rem\",\n  borderBottom: \"4px solid $secondaryAlt\",\n  backgroundColor: \"$secondary\",\n\n  \"@sm\": {\n    margin: \"0 1rem\",\n  },\n});\n\nconst Trigger = styled(Tabs.Trigger, {\n  display: \"flex\",\n  position: \"relative\",\n  padding: \"0.5rem 1rem\",\n  background: \"none\",\n  backgroundColor: \"transparent\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  fontFamily: \"inherit\",\n  fontSize: \"1rem\",\n  marginRight: \"1rem\",\n  lineHeight: \"1rem\",\n  whiteSpace: \"nowrap\",\n  cursor: \"pointer\",\n  fontWeight: 700,\n  transition: \"$all\",\n\n  \"&::after\": {\n    width: \"0\",\n    height: \"4px\",\n    content: \"\",\n    backgroundColor: \"$primaryMuted\",\n    position: \"absolute\",\n    bottom: \"-4px\",\n    left: \"0\",\n    transition: \"$all\",\n  },\n\n  \"&:hover\": {\n    color: \"$primary\",\n  },\n\n  \"&[data-state='active']\": {\n    color: \"$accent\",\n\n    \"&::after\": {\n      width: \"100%\",\n      backgroundColor: \"$accent\",\n    },\n  },\n});\n\nconst Content = styled(Tabs.Content, {\n  display: \"flex\",\n  flexGrow: \"1\",\n  flexShrink: \"0\",\n  position: \"absolute\",\n  top: \"0\",\n  left: \"0\",\n  \"&[data-state='active']\": {\n    width: \"100%\",\n    height: \"calc(100% - 2rem)\",\n    padding: \"1rem 0\",\n  },\n});\n\nconst Scroll = styled(\"div\", {\n  position: \"relative\",\n  height: \"100%\",\n  width: \"100%\",\n  overflowY: \"scroll\",\n});\n\nexport { Content, List, Scroll, Trigger, Wrapper };\n", "import React, { useEffect } from \"react\";\nimport { getLabel } from \"@/hooks/use-iiif\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { Group } from \"@/components/Navigator/Cue.styled\";\nimport useWebVtt, {\n  NodeWebVttCue,\n  NodeWebVttCueNested,\n} from \"@/hooks/use-webvtt\";\nimport Menu from \"@/components/Navigator/Menu\";\n\n// @ts-ignore\nimport { parse } from \"node-webvtt\";\n\ninterface Resource {\n  resource: any;\n}\n\nconst Resource: React.FC<Resource> = ({ resource }) => {\n  const [cues, setCues] = React.useState<Array<NodeWebVttCueNested>>([]);\n  const { id, label } = resource;\n  const { createNestedCues, orderCuesByTime } = useWebVtt();\n\n  useEffect(() => {\n    fetch(id, {\n      headers: {\n        \"Content-Type\": \"text/plain\",\n        Accept: \"application/json\",\n      },\n    })\n      .then((response) => response.text())\n      .then((data) => {\n        const flatCues = parse(data).cues as unknown as Array<NodeWebVttCue>;\n        const orderedCues = orderCuesByTime(flatCues);\n        const nestedCues = createNestedCues(orderedCues);\n        setCues(nestedCues);\n      })\n      .catch((error) => console.error(id, error.toString()));\n  }, [id]);\n\n  return (\n    <Group\n      aria-label={`navigate ${getLabel(label as InternationalString, \"en\")}`}\n    >\n      <Menu items={cues} />\n    </Group>\n  );\n};\n\nexport default Resource;\n", "import * as RadioGroup from \"@radix-ui/react-radio-group\";\nimport { styled, keyframes } from \"@/stitches\";\n\nconst spin = keyframes({\n  from: { transform: \"rotate(360deg)\" },\n  to: { transform: \"rotate(0deg)\" },\n});\n\nexport const Group = styled(RadioGroup.Root, {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n});\n\nexport const Item = styled(RadioGroup.Item, {\n  position: \"relative\",\n  cursor: \"pointer\",\n  display: \"flex\",\n  width: \"100%\",\n  justifyContent: \"space-between\",\n  textAlign: \"left\",\n  margin: \"0\",\n  padding: \"0.5rem 1.618rem\",\n  fontFamily: \"inherit\",\n  lineHeight: \"1.25em\",\n  fontSize: \"1rem\",\n  color: \"$primaryMuted\",\n  border: \"none\",\n  background: \"none\",\n\n  \"@sm\": {\n    padding: \"0.5rem 1rem\",\n    fontSize: \"0.8333rem\",\n  },\n\n  \"&::before\": {\n    content: \"\",\n    width: \"12px\",\n    height: \"12px\",\n    borderRadius: \"12px\",\n    position: \"absolute\",\n    backgroundColor: \"$primaryMuted\",\n    opacity: \"0\",\n    left: \"8px\",\n    marginTop: \"3px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  \"&::after\": {\n    content: \"\",\n    width: \"4px\",\n    height: \"6px\",\n    position: \"absolute\",\n    backgroundColor: \"$secondary\",\n    opacity: \"0\",\n    clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n    left: \"13px\",\n    marginTop: \"6px\",\n    boxSizing: \"content-box\",\n\n    \"@sm\": {\n      content: \"unset\",\n    },\n  },\n\n  strong: {\n    marginLeft: \"1rem\",\n  },\n\n  \"&:hover\": {\n    color: \"$accent\",\n\n    \"&::before\": {\n      backgroundColor: \"$accent\",\n      opacity: \"1\",\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"4px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"$secondary\",\n      clipPath: \"polygon(100% 50%, 0 100%, 0 0)\",\n      opacity: \"1\",\n    },\n  },\n\n  \"&[aria-checked='true']\": {\n    color: \"$primary\",\n    backgroundColor: \"$secondaryMuted\",\n    fontFamily: \"$sansBold\",\n\n    \"&::before\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accentMuted\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n\n    \"&::after\": {\n      content: \"\",\n      width: \"6px\",\n      height: \"6px\",\n      position: \"absolute\",\n      backgroundColor: \"transparent\",\n      border: \"3px solid $accent\",\n      clipPath: \"polygon(100% 0, 100% 100%, 0 0)\",\n      borderRadius: \"12px\",\n      left: \"8px\",\n      marginTop: \"4px\",\n      opacity: \"1\",\n      animation: \"1.5s linear infinite\",\n      animationName: spin,\n      boxSizing: \"content-box\",\n\n      \"@sm\": {\n        content: \"unset\",\n      },\n    },\n  },\n});\n", "import { v4 as uuidv4 } from \"uuid\";\n\nexport interface NodeWebVttCue {\n  identifier?: string;\n  start: number;\n  end: number;\n  text: string;\n  styles?: string;\n}\nexport interface NodeWebVttCueNested extends NodeWebVttCue {\n  children?: Array<NodeWebVttCueNested>;\n}\n\nconst useWebVtt = () => {\n  function addIdentifiersToParsedCues(\n    cues: Array<NodeWebVttCue>,\n  ): Array<NodeWebVttCue> {\n    const newCues = cues.map((cue) => {\n      const identifier = cue.identifier || uuidv4();\n      return { ...cue, identifier };\n    });\n    return newCues;\n  }\n\n  function createNestedCues(flat: Array<NodeWebVttCue>): Array<NodeWebVttCue> {\n    // Add identifier values to any cues which don't have them\n    const idCues = addIdentifiersToParsedCues(flat);\n\n    function getNestedChildren(\n      arr: Array<NodeWebVttCueNested>,\n      parent: string | null | undefined,\n    ) {\n      const out: Array<NodeWebVttCueNested> = [];\n\n      arr.forEach((item) => {\n        // Grab parent cues if they exist\n        const currentItemParents = arr.filter((arrItem) => {\n          return (\n            item.start >= arrItem.start &&\n            item.end <= arrItem.end &&\n            item.identifier !== arrItem.identifier\n          );\n        });\n\n        // An item in the flat list could have multiple parents,\n        // so lets find the most specific parent.  Let's sort the parents\n        // by smallest window of time between \"start\" and \"end\"\n        // values.  Then we pick the first element, which could be \"undefined\"\n        // for root level cues.\n        const currentItemParent = currentItemParents.sort((a, b) => {\n          const aDuration = a.end - a.start;\n          const bDuration = b.end - b.start;\n          if (aDuration === bDuration) return 0;\n          return aDuration < bDuration ? -1 : 1;\n        })[0];\n\n        // Is the current item's parent same as target parent?\n        if (\n          (!currentItemParent && !parent) ||\n          currentItemParent?.identifier === parent\n        ) {\n          // Find children of the current item\n          const children = getNestedChildren(arr, item.identifier);\n\n          if (children.length) {\n            item.children = children;\n          }\n\n          out.push(item);\n        }\n      });\n\n      return out;\n    }\n\n    const nestedCues = getNestedChildren(idCues, null);\n    return nestedCues;\n  }\n\n  /**\n   * Is a cue a child of another cue\n   * @param cue Object\n   * @param cues Array\n   * @returns Boolean\n   */\n  function isChild(\n    cue: NodeWebVttCue,\n    cues: Array<NodeWebVttCue> = [],\n  ): boolean {\n    return cues.some(\n      (currentCue) =>\n        cue.start >= currentCue.start && cue.end <= currentCue.end,\n    );\n  }\n\n  /**\n   * Sort Cues by cue start time\n   * @param cues\n   * @returns Array\n   */\n  function orderCuesByTime(\n    cues: Array<NodeWebVttCue> = [],\n  ): Array<NodeWebVttCue> {\n    return cues.sort((cue1, cue2) => cue1.start - cue2.start);\n  }\n\n  return {\n    addIdentifiersToParsedCues,\n    createNestedCues,\n    isChild,\n    orderCuesByTime,\n  };\n};\n\nexport default useWebVtt;\n", "import React from \"react\";\nimport { NodeWebVttCueNested } from \"@/hooks/use-webvtt\";\nimport Cue from \"@/components/Navigator/Cue\";\nimport { MenuStyled } from \"@/components/Navigator/Menu.styled\";\n\ninterface MenuProps {\n  items: Array<NodeWebVttCueNested>;\n}\n\nconst Menu: React.FC<MenuProps> = ({ items }) => {\n  return (\n    <MenuStyled>\n      {items.map(({ text, start, end, children: cueChildren, identifier }) => {\n        return (\n          <li key={identifier}>\n            <Cue label={text} start={start} end={end} />\n            {cueChildren && <Menu items={cueChildren} />}\n          </li>\n        );\n      })}\n    </MenuStyled>\n  );\n};\n\nexport default Menu;\n", "import React from \"react\";\nimport { Item } from \"@/components/Navigator/Cue.styled\";\nimport { convertTime } from \"@/services/utils\";\nimport { CurrentTimeContext } from \"@/context/current-time-context\";\n\ninterface Props {\n  label: string;\n  start: number;\n  end: number;\n}\n\nconst Cue: React.FC<Props> = ({ label, start, end }) => {\n  const { currentTime, updateStartTime } = React.useContext(CurrentTimeContext);\n  const isActive: boolean = start <= currentTime && currentTime < end;\n\n  const handleClick = () => {\n    updateStartTime(start);\n  };\n\n  return (\n    <Item\n      aria-checked={isActive}\n      data-testid=\"navigator-cue\"\n      onClick={handleClick}\n      value={label}\n    >\n      {label}\n      <strong>{convertTime(start)}</strong>\n    </Item>\n  );\n};\n\nexport default Cue;\n", "import React from \"react\";\n\nexport type CurrentTimeContextShape = {\n  currentTime: number;\n  startTime: number;\n  updateStartTime: (t: number) => void;\n  updateCurrentTime: (t: number) => void;\n};\n\nconst defaultValue: CurrentTimeContextShape = {\n  currentTime: 0,\n  startTime: 0,\n  updateStartTime: () => {},\n  updateCurrentTime: () => {},\n};\nexport const CurrentTimeContext = React.createContext(defaultValue);\n\nexport const CurrentTimeProvider = ({\n  children,\n}: {\n  children: React.ReactNode;\n}) => {\n  const [currentTime, setCurrentTime] = React.useState(\n    defaultValue.currentTime,\n  );\n  const [startTime, setStartTime] = React.useState(0);\n  const updateStartTime = (t: number) => setStartTime(t);\n  const updateCurrentTime = (t: number) => setCurrentTime(t);\n\n  return (\n    <CurrentTimeContext.Provider\n      value={{ currentTime, startTime, updateStartTime, updateCurrentTime }}\n    >\n      {children}\n    </CurrentTimeContext.Provider>\n  );\n};\n", "import { styled } from \"stitches\";\nimport { Item } from \"@/components/Navigator/Cue.styled\";\n\nexport const MenuStyled = styled(\"ul\", {\n  listStyle: \"none\",\n  paddingLeft: \"1rem\",\n  position: \"relative\",\n\n  \"&&:first-child\": {\n    paddingLeft: \"0\",\n  },\n\n  \"& li ul\": {\n    [`& ${Item}`]: {\n      backgroundColor: \"unset\",\n\n      \"&::before\": {\n        content: \"none\",\n      },\n      \"&::after\": {\n        content: \"none\",\n      },\n    },\n  },\n\n  \"&:first-child\": {\n    margin: \"0 0 1.618rem\",\n  },\n});\n", "import { styled } from \"@/stitches\";\n\nconst AboutContent = styled(\"div\", {\n  padding: \" 0 1.618rem 2rem\",\n  display: \"flex\",\n  flexDirection: \"column\",\n  overflow: \"scroll\",\n  position: \"absolute\",\n  color: \"$primary\",\n  fontFamily: \"$sans\",\n  fontWeight: \"400\",\n  fontSize: \"1rem\",\n  zIndex: \"0\",\n\n  img: {\n    maxWidth: \"100px\",\n    maxHeight: \"100px\",\n    objectFit: \"contain\",\n    color: \"transparent\",\n    margin: \"0 0 1rem\",\n    borderRadius: \"3px\",\n    backgroundColor: \"$secondaryMuted\",\n  },\n\n  video: {\n    display: \"none\",\n  },\n\n  \"a, a:visited\": {\n    color: \"$accent\",\n  },\n\n  p: {\n    fontSize: \"1rem\",\n    lineHeight: \"1.45em\",\n    margin: \"0\",\n  },\n\n  dl: {\n    margin: \"0\",\n\n    dt: {\n      fontWeight: \"700\",\n      margin: \"1rem 0 0.25rem\",\n    },\n\n    dd: {\n      margin: \"0\",\n    },\n  },\n\n  \".manifest-property-title\": {\n    fontWeight: \"700\",\n    margin: \"1rem 0 0.25rem\",\n  },\n\n  \"ul, ol\": {\n    padding: \"0\",\n    margin: \"0\",\n\n    li: {\n      fontSize: \"1rem\",\n      lineHeight: \"1.45em\",\n      listStyle: \"none\",\n      margin: \"0.25rem 0 0.25rem\",\n    },\n  },\n});\n\nconst AboutStyled = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n});\n\nexport { AboutContent, AboutStyled };\n", "import { Homepage } from \"@samvera/nectar-iiif\";\nimport { NectarExternalWebResource } from \"@samvera/nectar-iiif/dist/types/nectar\";\nimport React from \"react\";\n\ninterface PropertiesHomepageProps {\n  homepage: NectarExternalWebResource[];\n}\n\nconst PropertiesHomepage: React.FC<PropertiesHomepageProps> = ({\n  homepage,\n}) => {\n  if (homepage?.length === 0) return <></>;\n\n  return (\n    <>\n      <span className=\"manifest-property-title\">Homepage</span>\n      <Homepage homepage={homepage} />\n    </>\n  );\n};\n\nexport default PropertiesHomepage;\n", "import React from \"react\";\n\ninterface PropertiesIdProps {\n  id: string;\n  htmlLabel: string;\n  parent?: \"manifest\" | \"canvas\";\n}\n\nconst PropertiesId: React.FC<PropertiesIdProps> = ({\n  id,\n  htmlLabel,\n  parent = \"manifest\",\n}) => {\n  return (\n    <>\n      <span className=\"manifest-property-title\">{htmlLabel}</span>\n      <a href={id} target=\"_blank\" id={`iiif-${parent}-id`}>\n        {id}\n      </a>\n    </>\n  );\n};\n\nexport default PropertiesId;\n", "import { MetadataItem } from \"@iiif/presentation-3\";\nimport React from \"react\";\nimport { Metadata } from \"@samvera/nectar-iiif\";\n\ninterface PropertiesMetadataProps {\n  metadata: MetadataItem[] | null;\n  parent?: \"manifest\" | \"canvas\";\n}\n\nconst PropertiesMetadata: React.FC<PropertiesMetadataProps> = ({\n  metadata,\n  parent = \"manifest\",\n}) => {\n  if (!metadata) return <></>;\n\n  return (\n    <>\n      <Metadata metadata={metadata} id={`iiif-${parent}-metadata`} />\n    </>\n  );\n};\n\nexport default PropertiesMetadata;\n", "import { MetadataItem } from \"@iiif/presentation-3\";\nimport React from \"react\";\nimport { RequiredStatement } from \"@samvera/nectar-iiif\";\n\ninterface PropertiesSummaryProps {\n  requiredStatement: MetadataItem | null;\n  parent?: \"manifest\" | \"canvas\";\n}\n\nconst PropertiesRequiredStatement: React.FC<PropertiesSummaryProps> = ({\n  requiredStatement,\n  parent = \"manifest\",\n}) => {\n  if (!requiredStatement) return <></>;\n\n  return (\n    <>\n      <RequiredStatement\n        requiredStatement={requiredStatement}\n        id={`iiif-${parent}-required-statement`}\n      />\n    </>\n  );\n};\n\nexport default PropertiesRequiredStatement;\n", "import React from \"react\";\n\ninterface PropertiesRightsProps {\n  rights: string | null;\n}\n\nconst PropertiesRights: React.FC<PropertiesRightsProps> = ({ rights }) => {\n  if (!rights) return <></>;\n\n  return (\n    <>\n      <span className=\"manifest-property-title\">Rights</span>\n      <a href={rights} target=\"_blank\">\n        {rights}\n      </a>\n    </>\n  );\n};\n\nexport default PropertiesRights;\n", "import { NectarExternalWebResource } from \"@samvera/nectar-iiif/dist/types/nectar\";\nimport { SeeAlso } from \"@samvera/nectar-iiif\";\nimport React from \"react\";\n\ninterface PropertiesSeeAlsoProps {\n  seeAlso: NectarExternalWebResource[];\n}\n\nconst PropertiesSeeAlso: React.FC<PropertiesSeeAlsoProps> = ({ seeAlso }) => {\n  if (seeAlso?.length === 0) return <></>;\n\n  return (\n    <>\n      <span className=\"manifest-property-title\">See Also</span>\n      <SeeAlso seeAlso={seeAlso} />\n    </>\n  );\n};\n\nexport default PropertiesSeeAlso;\n", "import { InternationalString } from \"@iiif/presentation-3\";\nimport React from \"react\";\nimport { Summary } from \"@samvera/nectar-iiif\";\n\ninterface PropertiesSummaryProps {\n  summary: InternationalString | null;\n  parent?: \"manifest\" | \"canvas\";\n}\n\nconst PropertiesSummary: React.FC<PropertiesSummaryProps> = ({\n  summary,\n  parent = \"manifest\",\n}) => {\n  if (!summary) return <></>;\n\n  return (\n    <>\n      <Summary summary={summary} as=\"p\" id={`iiif-${parent}-summary`} />\n    </>\n  );\n};\n\nexport default PropertiesSummary;\n", "import {\n  IIIFExternalWebResource,\n  InternationalString,\n} from \"@iiif/presentation-3\";\n\nimport React from \"react\";\nimport { Thumbnail } from \"@samvera/nectar-iiif\";\n\ninterface PropertiesThumbnailProps {\n  label: InternationalString | null;\n  thumbnail: IIIFExternalWebResource[];\n}\n\nconst PropertiesThumbnail: React.FC<PropertiesThumbnailProps> = ({\n  label,\n  thumbnail,\n}) => {\n  if (thumbnail?.length === 0) return <></>;\n\n  return (\n    <>\n      <Thumbnail\n        altAsLabel={label ? label : { none: [\"resource\"] }}\n        thumbnail={thumbnail}\n      />\n    </>\n  );\n};\n\nexport default PropertiesThumbnail;\n", "import {\n  AboutContent,\n  AboutStyled,\n} from \"@/components/Navigator/About/About.styled\";\nimport {\n  Homepage,\n  Id,\n  Metadata,\n  RequiredStatement,\n  Rights,\n  SeeAlso,\n  Summary,\n  Thumbnail,\n} from \"@/components/Properties\";\nimport {\n  IIIFExternalWebResource,\n  ManifestNormalized,\n} from \"@iiif/presentation-3\";\nimport { NectarExternalWebResource } from \"@samvera/nectar-iiif/dist/types/nectar\";\nimport React, { useEffect, useState } from \"react\";\nimport { useViewerState } from \"@/context/viewer-context\";\n\nconst About: React.FC = () => {\n  const viewerState: any = useViewerState();\n  const { activeManifest, vault } = viewerState;\n\n  const [manifest, setManifest] = useState<ManifestNormalized>();\n\n  const [homepage, setHomepage] = useState<IIIFExternalWebResource[]>([]);\n  const [seeAlso, setSeeAlso] = useState<IIIFExternalWebResource[]>([]);\n  const [thumbnail, setThumbnail] = useState<IIIFExternalWebResource[]>([]);\n\n  useEffect(() => {\n    const data = vault.get(activeManifest);\n    setManifest(data);\n\n    if (data.homepage?.length > 0) setHomepage(vault.get(data.homepage));\n    if (data.seeAlso?.length > 0) setSeeAlso(vault.get(data.seeAlso));\n    if (data.thumbnail?.length > 0) setThumbnail(vault.get(data.thumbnail));\n  }, [activeManifest, vault]);\n\n  if (!manifest) return <></>;\n\n  return (\n    <AboutStyled>\n      <AboutContent>\n        <Thumbnail thumbnail={thumbnail} label={manifest.label} />\n        <Summary summary={manifest.summary} />\n        <Metadata metadata={manifest.metadata} />\n        <RequiredStatement requiredStatement={manifest.requiredStatement} />\n        <Rights rights={manifest.rights} />\n        <Homepage\n          homepage={homepage as unknown as NectarExternalWebResource[]}\n        />\n        <SeeAlso seeAlso={seeAlso as unknown as NectarExternalWebResource[]} />\n        <Id id={manifest.id} htmlLabel=\"IIIF Manifest\" />\n      </AboutContent>\n    </AboutStyled>\n  );\n};\n\nexport default About;\n", "import React from \"react\";\nimport Hls from \"hls.js\";\nimport { PlayerWrapper } from \"@/components/Player/Player.styled\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"@/hooks/use-iiif/getSupplementingResources\";\nimport AudioVisualizer from \"@/components/Player/AudioVisualizer\";\nimport { CurrentTimeContext } from \"@/context/current-time-context\";\nimport { useViewerState } from \"@/context/viewer-context\";\nimport Track from \"@/components/Player/Track\";\nimport {\n  getAccompanyingCanvasImage,\n  getCanvasByCriteria,\n} from \"@/hooks/use-iiif\";\n\n// Set referrer header as a NU domain: ie. meadow.rdc-staging.library.northwestern.edu\n\ninterface PlayerProps {\n  painting: IIIFExternalWebResource;\n  resources: LabeledResource[];\n}\n\nconst Player: React.FC<PlayerProps> = ({ painting, resources }) => {\n  const playerRef = React.useRef(null);\n  const isAudio = painting?.format?.includes(\"audio/\");\n\n  const { startTime, updateCurrentTime } = React.useContext(CurrentTimeContext);\n\n  const viewerState: any = useViewerState();\n  const { activeCanvas, configOptions, vault } = viewerState;\n\n  /**\n   * Get active canvas full object\n   */\n  const activeCanvasObject = getCanvasByCriteria(\n    vault,\n    { id: activeCanvas, type: \"Canvas\" },\n    \"painting\",\n    [\"Image\"],\n  );\n\n  const posterImage = getAccompanyingCanvasImage(\n    activeCanvasObject.accompanyingCanvas,\n  );\n\n  /**\n   * HLS.js binding for .m3u8 files\n   * STAGING and PRODUCTION environments only\n   */\n  React.useEffect(() => {\n    /**\n     * Check that IIIF content resource ID exists and\n     * we have a reffed <video> for attaching HLS\n     */\n    if (!painting.id || !playerRef.current) return;\n\n    /**\n     * Eject HLS attachment if file extension from\n     * the IIIF content resource ID is not .m3u8\n     */\n    if (painting.id.split(\".\").pop() !== \"m3u8\") return;\n\n    // Bind hls.js package to our <video /> element and then load the media source\n    const hls = new Hls();\n    hls.attachMedia(playerRef.current);\n    hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n      hls.loadSource(painting.id as string);\n    });\n\n    // Handle errors\n    hls.on(Hls.Events.ERROR, function (event, data) {\n      if (data.fatal) {\n        switch (data.type) {\n          case Hls.ErrorTypes.NETWORK_ERROR:\n            // try to recover network error\n            console.error(\n              `fatal ${event} network error encountered, try to recover`,\n            );\n            hls.startLoad();\n            break;\n          case Hls.ErrorTypes.MEDIA_ERROR:\n            console.error(\n              `fatal ${event} media error encountered, try to recover`,\n            );\n            hls.recoverMediaError();\n            break;\n          default:\n            // cannot recover\n            hls.destroy();\n            break;\n        }\n      }\n    });\n\n    return () => {\n      if (hls) {\n        hls.detachMedia();\n        hls.destroy();\n        updateCurrentTime(0);\n      }\n    };\n  }, [painting.id]);\n\n  React.useEffect(() => {\n    let video: any = playerRef.current;\n    if (video) video.currentTime = startTime;\n\n    if (startTime !== 0) video.play();\n  }, [startTime]);\n\n  const handlePlay = () => {\n    let video: any = playerRef.current;\n    if (video) {\n      video.ontimeupdate = (event: any) => {\n        updateCurrentTime(event.target.currentTime);\n      };\n    }\n  };\n\n  return (\n    <PlayerWrapper\n      css={{\n        backgroundColor: configOptions.canvasBackgroundColor,\n        maxHeight: configOptions.canvasHeight,\n      }}\n    >\n      <video\n        id=\"clover-iiif-video\"\n        key={painting.id}\n        ref={playerRef}\n        controls\n        height={painting.height}\n        width={painting.width}\n        onPlay={handlePlay}\n        crossOrigin=\"anonymous\"\n        poster={posterImage}\n      >\n        <source src={painting.id} type={painting.format} />\n        {resources.length > 0 &&\n          resources.map((resource) => (\n            <Track\n              resource={resource}\n              ignoreCaptionLabels={configOptions.ignoreCaptionLabels}\n              key={resource.id}\n            />\n          ))}\n        Sorry, your browser doesn't support embedded videos.\n      </video>\n\n      {isAudio && <AudioVisualizer ref={playerRef} />}\n    </PlayerWrapper>\n  );\n};\n\nexport default Player;\n", "import { styled } from \"@/stitches\";\n\nexport const PlayerWrapper = styled(\"div\", {\n  position: \"relative\",\n  backgroundColor: \"$primaryAlt\",\n  display: \"flex\",\n  flexGrow: \"0\",\n  flexShrink: \"1\",\n  maxHeight: \"500px\",\n  zIndex: \"1\",\n\n  video: {\n    backgroundColor: \"transparent\",\n    display: \"flex\",\n    position: \"relative\",\n    objectFit: \"contain\",\n    width: \"100%\",\n    height: \"100%\",\n    zIndex: \"1\",\n  },\n});\n", "import React from \"react\";\nimport { AudioVisualizerWrapper } from \"@/components/Player/AudioVisualizer.styled\";\n\nconst AudioVisualizer = React.forwardRef((_props, ref: any) => {\n  const canvasRef = React.useRef<HTMLCanvasElement>(null);\n\n  React.useEffect(() => {\n    if (!ref) return;\n    // Add a callback fn to the `<video>` onplay event\n    ref.current.onplay = audioVisualizer;\n  }, [ref]);\n\n  function audioVisualizer() {\n    const video = ref.current;\n    const context = new AudioContext();\n    const src = context.createMediaElementSource(video);\n    let analyser = context.createAnalyser();\n\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    canvas.width = video.offsetWidth;\n    canvas.height = video.offsetHeight;\n    const ctx = canvas.getContext(\"2d\");\n\n    src.connect(analyser);\n    analyser.connect(context.destination);\n\n    analyser.fftSize = 256;\n\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n\n    setInterval(function () {\n      renderFrame(\n        analyser,\n        ctx,\n        bufferLength,\n        dataArray,\n        canvas.width,\n        canvas.height,\n      );\n    }, 20);\n  }\n\n  function renderFrame(\n    analyser: any,\n    ctx: any,\n    bufferLength: number,\n    dataArray: Uint8Array,\n    width: number,\n    height: number,\n  ) {\n    let barWidth = (width / bufferLength) * 2.6;\n    let barHeight;\n    let x = 0;\n\n    analyser.getByteFrequencyData(dataArray);\n\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0, 0, width, height);\n\n    for (let i = 0; i < bufferLength; i++) {\n      barHeight = dataArray[i] * 2;\n      ctx.fillStyle = `rgba(${78}, 42, 132, 1)`;\n      ctx.fillRect(x, height - barHeight, barWidth, barHeight);\n\n      x += barWidth + 6;\n    }\n  }\n\n  return <AudioVisualizerWrapper ref={canvasRef} />;\n});\n\nexport default AudioVisualizer;\n", "import { styled } from \"@/stitches\";\n\nexport const AudioVisualizerWrapper = styled(\"canvas\", {\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\",\n});\n", "import React from \"react\";\nimport { InternationalString } from \"@iiif/presentation-3\";\nimport { LabeledResource } from \"@/hooks/use-iiif/getSupplementingResources\";\nimport { getLabel } from \"@/hooks/use-iiif\";\n\nexport interface TrackProps {\n  resource: LabeledResource;\n  ignoreCaptionLabels: string[];\n}\n\nconst Track: React.FC<TrackProps> = ({ resource, ignoreCaptionLabels }) => {\n  const label = getLabel(resource.label as InternationalString, \"en\") as any;\n\n  const isIgnored = label.some((value: string) =>\n    ignoreCaptionLabels.includes(value),\n  );\n\n  if (isIgnored) return null;\n\n  return (\n    <track\n      key={resource.id}\n      src={resource.id as string}\n      label={label}\n      srcLang=\"en\"\n      data-testid=\"player-track\"\n    />\n  );\n};\n\nexport default Track;\n", "import React, { useEffect, useState } from \"react\";\nimport { IIIFExternalWebResource } from \"@iiif/presentation-3\";\nimport OSD, { osdImageTypes } from \"@/components/ImageViewer/OSD\";\nimport { getImageServiceURI } from \"@/services/iiif\";\n\ninterface ImageViewerProps {\n  body: IIIFExternalWebResource;\n}\n\nconst ImageViewer: React.FC<ImageViewerProps> = ({ body }) => {\n  const [imageType, setImageType] = useState<osdImageTypes>();\n  const [uri, setUri] = useState<string | undefined>();\n\n  useEffect(() => {\n    if (Array.isArray(body.service) && body.service.length > 0) {\n      setImageType(\"tiledImage\");\n      setUri(getImageServiceURI(body.service));\n    } else {\n      setImageType(\"simpleImage\");\n      setUri(body.id);\n    }\n  }, [body]);\n\n  return <OSD uri={uri} key={uri} imageType={imageType} />;\n};\n\nexport default ImageViewer;\n", "import React, { useEffect, useState } from \"react\";\nimport OpenSeadragon from \"openseadragon\";\nimport {\n  Navigator,\n  Viewport,\n  Wrapper,\n} from \"@/components/ImageViewer/ImageViewer.styled\";\nimport Controls from \"@/components/ImageViewer/Controls\";\nimport { getInfoResponse } from \"@/services/iiif\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useViewerState } from \"@/context/viewer-context\";\n\nexport type osdImageTypes = \"tiledImage\" | \"simpleImage\" | undefined;\n\ninterface OSDProps {\n  uri: string | undefined;\n  imageType: osdImageTypes;\n}\n\nconst OSD: React.FC<OSDProps> = ({ uri, imageType }) => {\n  const [osdUri, setOsdUri] = useState<string>();\n  const viewerState: any = useViewerState();\n  const { configOptions } = viewerState;\n\n  const instance = uuidv4();\n\n  const config = {\n    id: `openseadragon-viewport-${instance}`,\n    loadTilesWithAjax: true,\n    homeButton: \"zoomReset\",\n    showFullPageControl: false,\n    zoomInButton: \"zoomIn\",\n    zoomOutButton: \"zoomOut\",\n    showNavigator: true,\n    navigatorBorderColor: \"transparent\",\n    navigatorId: `openseadragon-navigator-${instance}`,\n    gestureSettingsMouse: {\n      clickToZoom: true,\n      dblClickToZoom: true,\n      pinchToZoom: true,\n      scrollToZoom: false,\n    },\n  };\n\n  useEffect(() => {\n    if (uri !== osdUri) setOsdUri(uri);\n  }, []);\n\n  useEffect(() => {\n    if (osdUri) {\n      switch (imageType) {\n        case \"simpleImage\":\n          OpenSeadragon(config).addSimpleImage({\n            url: osdUri,\n          });\n          break;\n        case \"tiledImage\":\n          getInfoResponse(osdUri).then((tileSource) =>\n            OpenSeadragon(config).addTiledImage({\n              tileSource: tileSource,\n            }),\n          );\n          break;\n        default:\n          console.warn(\n            `Unable to render ${osdUri} in OpenSeadragon as type: \"${imageType}\"`,\n          );\n          break;\n      }\n    }\n  }, [osdUri]);\n\n  return (\n    <Wrapper\n      css={{\n        backgroundColor: configOptions.canvasBackgroundColor,\n        height: configOptions.canvasHeight,\n      }}\n    >\n      <Controls />\n      <Navigator id={`openseadragon-navigator-${instance}`} />\n      <Viewport id={`openseadragon-viewport-${instance}`} />\n    </Wrapper>\n  );\n};\n\nexport default OSD;\n", "import { styled } from \"@/stitches\";\n\nconst Navigator = styled(\"div\", {\n  position: \"absolute !important\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  left: \"1rem\",\n  width: \"161.8px\",\n  height: \"100px\",\n  backgroundColor: \"#000D\",\n  boxShadow: \"5px 5px 5px #0002\",\n  borderRadius: \"3px\",\n\n  \".displayregion\": {\n    border: \" 3px solid $accent !important\",\n    boxShadow: \"0 0 3px #0006\",\n  },\n\n  \"@sm\": {\n    width: \"123px\",\n    height: \"76px\",\n  },\n});\n\nconst Viewport = styled(\"div\", {\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\",\n  zIndex: \"0\",\n});\n\nconst Wrapper = styled(\"div\", {\n  width: \"100%\",\n  height: \"61.8vh\",\n  maxHeight: \"100vh\",\n  background: \"black\",\n  backgroundSize: \"contain\",\n  color: \"white\",\n  position: \"relative\",\n  zIndex: \"1\",\n  overflow: \"hidden\",\n});\n\nexport { Navigator, Viewport, Wrapper };\n", "import React from \"react\";\nimport Button from \"@/components/ImageViewer/Button\";\nimport { Wrapper } from \"@/components/ImageViewer/Controls.styled\";\n\nconst Controls: React.FC = () => {\n  const ZoomIn = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M256 112v288M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomOut = () => {\n    return (\n      <path\n        strokeLinecap=\"round\"\n        strokeMiterlimit=\"10\"\n        strokeWidth=\"45\"\n        d=\"M400 256H112\"\n      />\n    );\n  };\n\n  const ZoomReset = () => {\n    return (\n      <>\n        <path\n          fill=\"none\"\n          strokeLinecap=\"round\"\n          strokeMiterlimit=\"10\"\n          strokeWidth=\"45\"\n          d=\"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128\"\n        />\n        <path d=\"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z\" />\n      </>\n    );\n  };\n\n  return (\n    <Wrapper data-testid=\"openseadragon-controls\" id=\"openseadragon-controls\">\n      <Button id=\"zoomIn\" label=\"zoom in\">\n        <ZoomIn />\n      </Button>\n      <Button id=\"zoomOut\" label=\"zoom in\">\n        <ZoomOut />\n      </Button>\n      <Button id=\"zoomReset\" label=\"reset zoom\">\n        <ZoomReset />\n      </Button>\n    </Wrapper>\n  );\n};\n\nexport default Controls;\n", "import React from \"react\";\nimport { Item } from \"@/components/ImageViewer/Button.styled\";\n\ninterface ButtonProps {\n  id: string;\n  label: string;\n  children: React.ReactChild;\n}\n\nconst Button: React.FC<ButtonProps> = ({ id, label, children }) => {\n  return (\n    <Item id={id} data-testid=\"openseadragon-button\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-labelledby={`${id}-svg-title`}\n        data-testid=\"openseadragon-button-svg\"\n        focusable=\"false\"\n        viewBox=\"0 0 512 512\"\n        role=\"img\"\n      >\n        <title id={`${id}-svg-title`}>{label}</title>\n        {children}\n      </svg>\n    </Item>\n  );\n};\n\nexport default Button;\n", "import { styled } from \"@/stitches\";\n\nconst Item = styled(\"button\", {\n  display: \"flex\",\n  height: \"2rem\",\n  width: \"2rem\",\n  borderRadius: \"2rem\",\n  padding: \"0\",\n  margin: \"0\",\n  fontFamily: \"inherit\",\n  background: \"none\",\n  border: \"none\",\n  color: \"white\",\n  cursor: \"pointer\",\n  marginLeft: \"0.618rem\",\n  backgroundColor: \"#000D\",\n  filter: \"drop-shadow(5px 5px 5px #0006)\",\n  transition: \"$all\",\n  boxSizing: \"content-box !important\",\n\n  svg: {\n    height: \"60%\",\n    width: \"60%\",\n    padding: \"20%\",\n    fill: \"$secondary\",\n    stroke: \"$secondary\",\n    filter: \"drop-shadow(5px 5px 5px #000D)\",\n    transition: \"$all\",\n    boxSizing: \"inherit\",\n  },\n\n  \"&:hover, &:focus\": {\n    backgroundColor: \"$accent\",\n  },\n\n  \"&#zoomReset\": {\n    \"&:hover, &:focus\": {\n      svg: {\n        rotate: \"45deg\",\n      },\n    },\n  },\n});\n\nexport { Item };\n", "import { styled } from \"@/stitches\";\n\nconst Wrapper = styled(\"div\", {\n  position: \"absolute\",\n  zIndex: \"1\",\n  top: \"1rem\",\n  right: \"1rem\",\n});\n\nexport { Wrapper };\n", "import { ImageService, Service } from \"@iiif/presentation-3\";\n\nexport const getInfoResponse = (id: string) =>\n  fetch(`${id.replace(/\\/$/, \"\")}/info.json`)\n    .then((response) => response.json())\n    .then((json) => json)\n    .catch((error: any) => {\n      console.error(\n        `The IIIF tilesource ${id.replace(\n          /\\/$/,\n          \"\",\n        )}/info.json failed to load: ${error}`,\n      );\n    });\n\nexport const getImageServiceURI = (service: Service[] | undefined) => {\n  let imageService: ImageService;\n  let imageServiceURI: string | undefined;\n\n  if (Array.isArray(service)) {\n    imageService = service[0] as ImageService;\n    if (imageService) {\n      let id: string | undefined;\n      \"@id\" in imageService\n        ? (id = imageService[\"@id\"])\n        : (id = imageService.id);\n\n      imageServiceURI = id;\n    }\n  }\n\n  return imageServiceURI;\n};\n", "import React from \"react\";\nimport {\n  ErrorFallbackStyled,\n  ErrorBody,\n  Headline,\n} from \"@/components/Viewer/ErrorFallback.styled\";\n\ninterface ErrorFallbackProps {\n  error: Error;\n}\n\nconst ErrorFallback: React.FC<ErrorFallbackProps> = ({ error }) => {\n  const { message } = error;\n\n  return (\n    <ErrorFallbackStyled role=\"alert\">\n      <Headline data-testid=\"headline\">Something went wrong</Headline>\n      {message && <ErrorBody>{`Error message: ${message}`} </ErrorBody>}\n    </ErrorFallbackStyled>\n  );\n};\n\nexport default ErrorFallback;\n", "import { styled } from \"@/stitches\";\n\nconst ErrorFallbackStyled = styled(\"div\", {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n});\n\nconst Headline = styled(\"p\", {\n  fontFamily: \"$display\",\n  fontWeight: \"bold\",\n  fontSize: \"x-large\",\n});\n\nconst ErrorBody = styled(\"span\", {\n  fontSize: \"medium\",\n});\n\nexport { ErrorFallbackStyled, ErrorBody, Headline };\n"],
  "mappings": "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",
  "names": ["React", "useEffect", "useState", "React", "useReducer", "Vault", "defaultConfigOptions", "defaultState", "ViewerStateContext", "ViewerDispatchContext", "viewerReducer", "state", "action", "ViewerProvider", "initialState", "children", "dispatch", "useViewerState", "context", "useViewerDispatch", "React", "useEffect", "useState", "getUrl", "obj", "getAccompanyingCanvasImage", "accompanyingCanvas", "thumbnail", "e", "getCanvasByCriteria", "vault", "item", "motivation", "paintingType", "_a", "_b", "entity", "filterAnnotations", "annotation", "annotationBody", "resource", "getLabel", "label", "language", "codes", "getPaintingResource", "vault", "id", "canvasEntity", "getCanvasByCriteria", "getSupplementingResources", "vault", "activeCanvas", "format", "canvas", "annotationPage", "annotations", "annotation", "_a", "annotationBody", "resource", "filtered", "getThumbnail", "vault", "entity", "width", "height", "candidates", "canvasThumbnail", "annotationThumbnail", "annotationBody", "createStitches", "theme", "media", "styled", "css", "keyframes", "createTheme", "Collapsible", "MediaWrapper", "styled", "Content", "Main", "CollapsibleTrigger", "CollapsibleContent", "Aside", "Wrapper", "useEffect", "useState", "useMediaQuery", "mediaQuery", "match", "isMatch", "setIsMatch", "handler", "useEffect", "useLayoutEffect", "useState", "useBodyLocked", "initialLocked", "locked", "setLocked", "originalOverflow", "Collapsible", "React", "Popover", "Select", "CollectionIcon", "styled", "CollectionButton", "CollectionContent", "CollectionItem", "CollectionLabel", "CollectionStyled", "IIIFBadgeButton", "styled", "Popover", "IIIFBadgeContent", "ManifestLabel", "Header", "CollectionStyled", "Popover", "React", "IIIFBadge", "red", "blue", "IIIFBadge_default", "React", "useCallback", "useEffect", "useState", "useCopyToClipboard", "text", "notifyTimeout", "copyStatus", "setCopyStatus", "copy", "timeoutId", "Status", "styled", "CopyTextStatus", "status", "React", "CopyText", "textPrompt", "textToCopy", "copyStatus", "copyText", "useCopyToClipboard", "CopyText_default", "Select", "Label", "Thumbnail", "React", "React", "SelectIcon", "direction", "title", "React", "CollectionIcon", "Icon_default", "Collection", "dispatch", "useViewerDispatch", "viewerState", "useViewerState", "activeManifest", "collection", "configOptions", "vault", "maxHeight", "React", "CollectionStyled", "manifestId", "CollectionButton", "Icon_default", "CollectionContent", "CollectionLabel", "Label", "item", "CollectionItem", "Thumbnail", "Collection_default", "Label", "React", "useEffect", "useState", "Switch", "StyledSwitch", "styled", "StyledThumb", "Wrapper", "Label", "StyledToggle", "Toggle", "dispatch", "useViewerDispatch", "checked", "setChecked", "useState", "useEffect", "React", "StyledToggle", "Wrapper", "Label", "StyledSwitch", "StyledThumb", "Toggle_default", "ViewerHeader", "manifestId", "manifestLabel", "viewerState", "useViewerState", "collection", "configOptions", "showTitle", "showIIIFBadge", "showInformationToggle", "React", "Header", "Collection_default", "ManifestLabel", "Label", "Popover", "IIIFBadgeButton", "IIIFBadge_default", "IIIFBadgeContent", "e", "CopyText_default", "Toggle_default", "Header_default", "React", "React", "useEffect", "useState", "RadioGroup", "Group", "styled", "React", "cleanTime", "standardNotation", "array", "hours", "minutes", "seconds", "zeroPad", "time", "convertTime", "duration", "zeroPad", "num", "places", "Icon", "Tag", "RadioGroup", "Tag", "Type", "styled", "Spacer", "Duration", "Item", "Label", "IconPath", "type", "React", "Icon", "Thumbnail", "canvas", "canvasIndex", "isActive", "thumbnail", "handleChange", "Item", "getLabel", "Type", "Tag", "Spacer", "Duration", "convertTime", "Label", "Thumbnail_default", "getResourceType", "annotation", "React", "useEffect", "useState", "Form", "styled", "Input", "Button", "Direction", "Wrapper", "useEffect", "useKeyPress", "key", "action", "onKeyup", "e", "useKeyPress_default", "PreviousIcon", "React", "NextIcon", "CloseIcon", "SearchIcon", "Controls", "handleCanvasToggle", "handleFilter", "activeIndex", "canvasLength", "toggleFilter", "setToggleFilter", "useState", "isNextDisabled", "setIsNextDisabled", "isPreviousDisabled", "setIsPreviousDisabled", "useEffect", "useKeyPress_default", "handleFilterToggle", "prevToggleFilter", "Wrapper", "Form", "Input", "event", "Direction", "Button", "Controls_default", "Media", "items", "dispatch", "useViewerDispatch", "state", "useViewerState", "activeCanvas", "vault", "filter", "setFilter", "useState", "mediaItems", "setMediaItems", "activeIndex", "setActiveIndex", "scrollRef", "React", "motivation", "paintingType", "handleChange", "canvasId", "useEffect", "entities", "item", "getCanvasByCriteria", "canvasEntity", "index", "element", "leftPos", "Controls_default", "value", "step", "Group", "_a", "label", "getLabel", "_b", "Thumbnail_default", "getThumbnail", "getResourceType", "Media_default", "React", "useEffect", "useState", "Tabs", "Wrapper", "styled", "List", "Trigger", "Content", "Scroll", "React", "useEffect", "RadioGroup", "spin", "keyframes", "Group", "styled", "Item", "uuidv4", "useWebVtt", "addIdentifiersToParsedCues", "cues", "cue", "identifier", "createNestedCues", "flat", "idCues", "getNestedChildren", "arr", "parent", "out", "item", "currentItemParent", "arrItem", "a", "b", "aDuration", "bDuration", "children", "isChild", "currentCue", "orderCuesByTime", "cue1", "cue2", "use_webvtt_default", "React", "React", "React", "defaultValue", "CurrentTimeContext", "CurrentTimeProvider", "children", "currentTime", "setCurrentTime", "startTime", "setStartTime", "updateStartTime", "t", "updateCurrentTime", "Cue", "label", "start", "end", "currentTime", "updateStartTime", "React", "CurrentTimeContext", "isActive", "Item", "convertTime", "Cue_default", "MenuStyled", "styled", "Item", "Menu", "items", "React", "MenuStyled", "text", "start", "end", "cueChildren", "identifier", "Cue_default", "Menu_default", "parse", "Resource", "resource", "cues", "setCues", "React", "id", "label", "createNestedCues", "orderCuesByTime", "use_webvtt_default", "useEffect", "response", "data", "flatCues", "orderedCues", "nestedCues", "error", "Group", "getLabel", "Menu_default", "Resource_default", "Label", "AboutContent", "styled", "AboutStyled", "Homepage", "React", "PropertiesHomepage", "homepage", "Homepage_default", "React", "PropertiesId", "id", "htmlLabel", "parent", "Id_default", "React", "Metadata", "PropertiesMetadata", "metadata", "parent", "Metadata_default", "React", "RequiredStatement", "PropertiesRequiredStatement", "requiredStatement", "parent", "RequiredStatement_default", "React", "PropertiesRights", "rights", "Rights_default", "SeeAlso", "React", "PropertiesSeeAlso", "seeAlso", "SeeAlso_default", "React", "Summary", "PropertiesSummary", "summary", "parent", "Summary_default", "React", "Thumbnail", "PropertiesThumbnail", "label", "thumbnail", "Thumbnail_default", "React", "useEffect", "useState", "About", "viewerState", "useViewerState", "activeManifest", "vault", "manifest", "setManifest", "useState", "homepage", "setHomepage", "seeAlso", "setSeeAlso", "thumbnail", "setThumbnail", "useEffect", "_a", "_b", "_c", "data", "React", "AboutStyled", "AboutContent", "Thumbnail_default", "Summary_default", "Metadata_default", "RequiredStatement_default", "Rights_default", "Homepage_default", "SeeAlso_default", "Id_default", "About_default", "Navigator", "activeCanvas", "resources", "viewerState", "useViewerState", "configOptions", "renderAbout", "activeResource", "setActiveResource", "useState", "useEffect", "handleValueChange", "value", "React", "Wrapper", "List", "Trigger", "id", "label", "Label", "Scroll", "Content", "About_default", "resource", "Resource_default", "Navigator_default", "React", "Hls", "PlayerWrapper", "styled", "React", "AudioVisualizerWrapper", "styled", "AudioVisualizer", "React", "_props", "ref", "canvasRef", "audioVisualizer", "video", "context", "src", "analyser", "canvas", "ctx", "bufferLength", "dataArray", "renderFrame", "width", "height", "barWidth", "barHeight", "x", "i", "AudioVisualizerWrapper", "AudioVisualizer_default", "React", "Track", "resource", "ignoreCaptionLabels", "label", "getLabel", "value", "React", "Track_default", "Player", "painting", "resources", "_a", "playerRef", "React", "isAudio", "startTime", "updateCurrentTime", "CurrentTimeContext", "viewerState", "useViewerState", "activeCanvas", "configOptions", "vault", "activeCanvasObject", "getCanvasByCriteria", "posterImage", "getAccompanyingCanvasImage", "hls", "Hls", "event", "data", "video", "handlePlay", "PlayerWrapper", "resource", "Track_default", "AudioVisualizer_default", "Player_default", "React", "useEffect", "useState", "React", "useEffect", "useState", "OpenSeadragon", "Navigator", "styled", "Viewport", "Wrapper", "React", "React", "Item", "styled", "Button", "id", "label", "children", "React", "Item", "Button_default", "Wrapper", "styled", "Controls", "React", "Wrapper", "Button_default", "Controls_default", "getInfoResponse", "id", "response", "json", "error", "getImageServiceURI", "service", "imageService", "imageServiceURI", "uuidv4", "OSD", "uri", "imageType", "osdUri", "setOsdUri", "useState", "viewerState", "useViewerState", "configOptions", "instance", "uuidv4", "config", "useEffect", "OpenSeadragon", "getInfoResponse", "tileSource", "React", "Wrapper", "Controls_default", "Navigator", "Viewport", "OSD_default", "ImageViewer", "body", "imageType", "setImageType", "useState", "uri", "setUri", "useEffect", "getImageServiceURI", "React", "OSD_default", "ImageViewer_default", "Button", "ViewerContent", "activeCanvas", "painting", "resources", "items", "isAbout", "isInformation", "isNavigator", "isNavigatorOpen", "isMedia", "React", "Content", "CurrentTimeProvider", "Main", "Player_default", "ImageViewer_default", "CollapsibleTrigger", "Button", "MediaWrapper", "Media_default", "Aside", "CollapsibleContent", "Navigator_default", "Content_default", "React", "ErrorFallbackStyled", "styled", "Headline", "ErrorBody", "ErrorFallback", "error", "message", "React", "ErrorFallbackStyled", "Headline", "ErrorBody", "ErrorFallback_default", "ErrorBoundary", "Viewer", "manifest", "theme", "viewerState", "useViewerState", "activeCanvas", "informationExpanded", "vault", "configOptions", "isMedia", "setIsMedia", "useState", "isNavigator", "setIsNavigator", "isNavigatorOpen", "setIsNavigatorOpen", "painting", "setPainting", "resources", "setResources", "isBodyLocked", "setIsBodyLocked", "useBodyLocked", "isSmallViewport", "useMediaQuery", "media", "useEffect", "getPaintingResource", "getSupplementingResources", "React", "ErrorFallback_default", "Wrapper", "Header_default", "Content_default", "Viewer_default", "createTheme", "App", "canvasIdCallback", "customTheme", "id", "manifestId", "options", "React", "ViewerProvider", "RenderViewer", "dispatch", "useViewerDispatch", "store", "useViewerState", "activeCanvas", "activeManifest", "isLoaded", "vault", "iiifResource", "setIiifResource", "useState", "manifest", "setManifest", "theme", "useEffect", "data", "error", "resource", "manifests", "item", "Viewer_default", "src_default"]
}
